(function(e, a) { for(var i in a) e[i] = a[i]; }(exports, /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 13);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"mongoose\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcIm1vbmdvb3NlXCI/ZDUwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJtb25nb29zZVwiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIm1vbmdvb3NlXCJcbi8vIG1vZHVsZSBpZCA9IDBcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/*!**************************!*\
  !*** external "express" ***!
  \**************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"express\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImV4cHJlc3NcIj9kMmQyIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImV4cHJlc3NcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJleHByZXNzXCJcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/*!*****************************!*\
  !*** ./app/config/index.js ***!
  \*****************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _dotenv = __webpack_require__(/*! dotenv */ 8);\n\nvar _dotenv2 = _interopRequireDefault(_dotenv);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_dotenv2.default.config();\n\nmodule.exports = {\n  \"appName\": \"CashFun\",\n  \"version\": {\n    \"name\": \"v1\",\n    \"code\": \"1.0.0\"\n  },\n  auth_secret: process.env.AUTH_SECRET,\n  port: process.env.PORT,\n  mongodb_uri: process.env.MONGODB_URI\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hcHAvY29uZmlnL2luZGV4LmpzP2M0OWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGRvdGVudiBmcm9tICdkb3RlbnYnO1xuXG5kb3RlbnYuY29uZmlnKCk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBcImFwcE5hbWVcIjogXCJDYXNoRnVuXCIsXG4gIFwidmVyc2lvblwiOiB7XG4gICAgXCJuYW1lXCI6IFwidjFcIixcbiAgICBcImNvZGVcIjogXCIxLjAuMFwiXG4gIH0sXG4gIGF1dGhfc2VjcmV0OiBwcm9jZXNzLmVudi5BVVRIX1NFQ1JFVCxcbiAgcG9ydDogcHJvY2Vzcy5lbnYuUE9SVCxcbiAgbW9uZ29kYl91cmk6IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJXG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFwcC9jb25maWcvaW5kZXguanMiXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTs7Ozs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBUkEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/*!******************************************!*\
  !*** ./app/middleware/Authentication.js ***!
  \******************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _jsonwebtoken = __webpack_require__(/*! jsonwebtoken */ 4);\n\nvar _jsonwebtoken2 = _interopRequireDefault(_jsonwebtoken);\n\nvar _config = __webpack_require__(/*! ../config */ 2);\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Authentication = function () {\n  function Authentication() {\n    _classCallCheck(this, Authentication);\n  }\n\n  _createClass(Authentication, null, [{\n    key: 'authenticate',\n    value: function authenticate(req, res, next) {\n      if (req.headers.authorization) {\n        var authorization = req.headers.authorization.split(' ');\n        var strategy = authorization[0];\n\n        if (strategy.toLowerCase() === 'bearer') {\n          try {\n            var token = authorization[1];\n            res.locals.user = _jsonwebtoken2.default.verify(token, _config2.default.auth_secret);\n            next();\n          } catch (error) {\n            res.status(401).json({\n              status: 401,\n              message: 'Authorization failed, invalid token!',\n              data: ''\n            });\n          }\n        } else {\n          res.status(401).json({\n            status: 401,\n            message: 'Authorization failed, not using the bearer strategy!',\n            data: ''\n          });\n        }\n      } else {\n        res.status(401).json({\n          status: 401,\n          message: 'Authorization failed, no token in request!',\n          data: ''\n        });\n      }\n    }\n  }]);\n\n  return Authentication;\n}();\n\nexports.default = Authentication;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hcHAvbWlkZGxld2FyZS9BdXRoZW50aWNhdGlvbi5qcz80ZDk5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QgZnJvbSAnanNvbndlYnRva2VuJztcbmltcG9ydCBjb25maWcgZnJvbSAnLi4vY29uZmlnJztcbmNsYXNzIEF1dGhlbnRpY2F0aW9uIHtcbiAgc3RhdGljIGF1dGhlbnRpY2F0ZShyZXEsIHJlcywgbmV4dCkge1xuICAgIGlmKHJlcS5oZWFkZXJzLmF1dGhvcml6YXRpb24pIHtcbiAgICAgIGNvbnN0IGF1dGhvcml6YXRpb24gPSByZXEuaGVhZGVycy5hdXRob3JpemF0aW9uLnNwbGl0KCcgJyk7XG4gICAgICBjb25zdCBzdHJhdGVneSA9IGF1dGhvcml6YXRpb25bMF07XG5cbiAgICAgIGlmKHN0cmF0ZWd5LnRvTG93ZXJDYXNlKCkgPT09ICdiZWFyZXInKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgdG9rZW4gPSBhdXRob3JpemF0aW9uWzFdO1xuICAgICAgICAgIHJlcy5sb2NhbHMudXNlciA9IGp3dC52ZXJpZnkodG9rZW4sIGNvbmZpZy5hdXRoX3NlY3JldCk7XG4gICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoKGVycm9yKSB7XG4gICAgICAgICAgcmVzLnN0YXR1cyg0MDEpLmpzb24oe1xuICAgICAgICAgICAgc3RhdHVzOiA0MDEsXG4gICAgICAgICAgICBtZXNzYWdlOiAnQXV0aG9yaXphdGlvbiBmYWlsZWQsIGludmFsaWQgdG9rZW4hJyxcbiAgICAgICAgICAgIGRhdGE6ICcnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgICBzdGF0dXM6IDQwMSxcbiAgICAgICAgICBtZXNzYWdlOiAnQXV0aG9yaXphdGlvbiBmYWlsZWQsIG5vdCB1c2luZyB0aGUgYmVhcmVyIHN0cmF0ZWd5IScsXG4gICAgICAgICAgZGF0YTogJydcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5zdGF0dXMoNDAxKS5qc29uKHtcbiAgICAgICAgc3RhdHVzOiA0MDEsXG4gICAgICAgIG1lc3NhZ2U6ICdBdXRob3JpemF0aW9uIGZhaWxlZCwgbm8gdG9rZW4gaW4gcmVxdWVzdCEnLFxuICAgICAgICBkYXRhOiAnJ1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEF1dGhlbnRpY2F0aW9uO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFwcC9taWRkbGV3YXJlL0F1dGhlbnRpY2F0aW9uLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFBQTs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"jsonwebtoken\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImpzb253ZWJ0b2tlblwiPzY3ZmEiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwianNvbndlYnRva2VuXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwianNvbndlYnRva2VuXCJcbi8vIG1vZHVsZSBpZCA9IDRcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4\n");

/***/ }),
/* 5 */
/*!**********************************!*\
  !*** ./app/models/UsersModel.js ***!
  \**********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _mongoose = __webpack_require__(/*! mongoose */ 0);\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _bcrypt = __webpack_require__(/*! bcrypt */ 20);\n\nvar _bcrypt2 = _interopRequireDefault(_bcrypt);\n\nvar _jsonwebtoken = __webpack_require__(/*! jsonwebtoken */ 4);\n\nvar _jsonwebtoken2 = _interopRequireDefault(_jsonwebtoken);\n\nvar _fs = __webpack_require__(/*! fs */ 10);\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _cloudinary = __webpack_require__(/*! cloudinary */ 11);\n\nvar _cloudinary2 = _interopRequireDefault(_cloudinary);\n\nvar _UsersSchema = __webpack_require__(/*! ../schema/UsersSchema */ 21);\n\nvar _UsersSchema2 = _interopRequireDefault(_UsersSchema);\n\nvar _Validation = __webpack_require__(/*! ../helpers/Validation */ 6);\n\nvar _Validation2 = _interopRequireDefault(_Validation);\n\nvar _config = __webpack_require__(/*! ../config */ 2);\n\nvar _config2 = _interopRequireDefault(_config);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n  * @class UsersModel\n  * @desc The usermodel containing actual functionalities\n  *\n*/\nvar UsersModel = function () {\n  function UsersModel() {\n    _classCallCheck(this, UsersModel);\n\n    this.UsersModel = _mongoose2.default.model('users', _UsersSchema2.default);\n  }\n\n  /**\n    * @methid login\n    * @param {Object}\n    * @desc verifies that the account with certain credentials exists\n    * @return {Promise} a promise object\n  */\n\n\n  _createClass(UsersModel, [{\n    key: 'login',\n    value: function login(req) {\n      var _this = this;\n\n      return new Promise(function (fulfill, reject) {\n        var email = req.body.email;\n        var password = req.body.password;\n\n        if (!email || !password) {\n          reject({\n            status: 400,\n            message: 'Email and password is required!'\n          });\n        }\n        _this.UsersModel.findOne({\n          email: email\n        }).then(function (user) {\n          _bcrypt2.default.compare(password, user.password).then(function (passwordMatch) {\n            if (passwordMatch) {\n              var userPayload = {\n                username: user.username,\n                id: user._id,\n                fullname: user.fullname\n              };\n              fulfill({\n                status: 200,\n                message: 'Login successful',\n                data: {\n                  token: _jsonwebtoken2.default.sign(userPayload, _config2.default.auth_secret, { expiresIn: '24h' })\n                }\n              });\n            } else {\n              reject({\n                status: 400,\n                message: 'Invalid email and password combination!'\n              });\n            }\n          });\n        }).catch(function (error) {\n          reject({\n            status: 400,\n            message: 'Invalid email and password combination'\n          });\n        });\n      });\n    }\n\n    /**\n      * @method addUser\n      * @param {Object} req\n      * @desc this creates a unique user in the database\n      * @return {Promise} a promise object\n      *\n    */\n\n  }, {\n    key: 'addUser',\n    value: function addUser(req) {\n      var _this2 = this;\n\n      return new Promise(function (fulfill, reject) {\n\n        var errors = {};\n        var username = req.body.username;\n        var fullname = req.body.fullname ? req.body.fullname : username;\n        var email = req.body.email;\n        var password = req.body.password;\n\n        if (!username) {\n          errors.username = 'Username is required';\n        }\n\n        if (!email) {\n          errors.email = 'Email address is required';\n        }\n\n        if (!password) {\n          errors.password = 'You\\'ve not chosen a password';\n        }\n\n        if (Object.keys(errors).length < 1) {\n          // no errors\n          _bcrypt2.default.hash(password, 10).then(function (hash) {\n            var newUser = {\n              fullname: fullname,\n              username: username,\n              email: email,\n              password: hash\n            };\n            var User = new _this2.UsersModel(newUser);\n            User.save().then(function (user) {\n              fulfill({\n                status: 201,\n                message: 'User created successfully',\n                data: {\n                  user_id: user._id,\n                  token: _jsonwebtoken2.default.sign(user, _config2.default.auth_secret, { expiresIn: '24h' }) }\n              });\n            }).catch(function (error) {\n              var errorMsg = _Validation2.default.resolveMongooseErrorMsg(error);\n              reject({\n                status: 400,\n                message: 'You have errors in the submitted form',\n                data: errorMsg\n              });\n            });\n          });\n        } else {\n          reject({\n            status: 400,\n            message: 'You have errors in the submitted form',\n            data: errors\n          });\n        }\n      });\n    }\n\n    /**\n      * @method getUsers\n      * @param {Object} req\n      * @desc get users in the system\n      * @return {Promise} a promise object\n    */\n\n  }, {\n    key: 'getUsers',\n    value: function getUsers(req) {\n      var _this3 = this;\n\n      return new Promise(function (fulfill, reject) {\n        var username = req.query.user;\n        var page = req.query.page;\n        var limit = parseInt(req.query.limit) || 10;\n\n        var findBy = {};\n\n        if (username) {\n          findBy = { username: username };\n        }\n\n        if (username) {\n          _this3.UsersModel.findOne({ username: username }).then(function (user) {\n            fulfill({\n              status: 200,\n              message: 'User found!',\n              data: user\n            });\n          }).catch(function (error) {\n            reject({\n              status: 500,\n              error: error\n            });\n          });\n        } else if (page) {\n          _this3.UsersModel.find().skip(page * limit).limit(limit).then(function (users) {\n            fulfill({\n              status: 200,\n              message: 'paginated users listed',\n              data: users\n            });\n          }).catch(function (error) {\n            reject({\n              status: 500,\n              message: 'An error occured!',\n              data: error\n            });\n          });\n        } else {\n          _this3.UsersModel.find().then(function (users) {\n            fulfill({\n              status: 200,\n              message: 'all users listed',\n              data: users\n            });\n          }).catch(function (error) {\n            reject({\n              status: 500,\n              message: 'An error occured!',\n              data: error\n            });\n          });\n        }\n      });\n    }\n\n    /**\n      @method update\n      @param {Object} req\n      @param {Object} res\n      @desc provide ability to update basic user profile details\n      @return {Promise} a promise object\n    */\n\n  }, {\n    key: 'update',\n    value: function update(req, res) {\n      var _this4 = this;\n\n      return new Promise(function (fulfill, reject) {\n        var uid = res.locals.user.id;\n        var fullname = req.body.fullname;\n        var username = req.body.username;\n        var bio = req.body.bio;\n        var gender = req.body.gender;\n        var phone = req.body.phone;\n        var update = {};\n\n        if (fullname && fullname.trim().length > 0) {\n          update.fullname = fullname;\n        }\n\n        if (username && username.trim().length > 0) {\n          update.username = username;\n        }\n\n        if (bio && bio.trim().length > 0) {\n          update.bio = bio;\n        }\n\n        if (gender && gender.trim().length > 0) {\n          update.gender = gender;\n        }\n\n        if (phone && phone.trim().length > 0) {\n          update.phone = phone;\n        }\n\n        _this4.UsersModel.findByIdAndUpdate(uid, update).then(function (user) {\n          fulfill({\n            status: 200,\n            message: 'User updated',\n            data: Object.assign(user, update)\n          });\n        }).catch(function (error) {\n          reject({\n            status: 500,\n            error: error\n          });\n        });\n      });\n    }\n  }, {\n    key: 'updatePassword',\n    value: function updatePassword(req, res) {\n      var _this5 = this;\n\n      return new Promise(function (fulfill, reject) {\n\n        var uid = res.locals.user.id;\n        var oldPassword = req.body.oldPassword;\n        var newPassword = req.body.newPassword;\n        var confirmPassword = req.body.confirmPassword;\n\n        _this5.UsersModel.findById(uid).then(function (user) {\n          _bcrypt2.default.compare(oldPassword, user.password).then(function (passwordMatch) {\n            if (passwordMatch) {\n              if (newPassword === confirmPassword) {\n                _bcrypt2.default.hash(newPassword, 10).then(function (hash) {\n                  _this5.UsersModel.findByIdAndUpdate(uid, { password: hash }).then(function () {\n                    fulfill({\n                      status: 200,\n                      message: 'Password updated successfully!'\n                    });\n                  }).catch(function (error) {\n                    reject({\n                      status: 500,\n                      message: 'Unable to update model',\n                      error: error\n                    });\n                  });\n                }).catch(function (error) {\n                  reject({\n                    status: 500,\n                    message: 'Unable to process password change'\n                  });\n                });\n              } else {\n                reject({\n                  status: 400,\n                  message: 'Your new password do not match'\n                });\n              }\n            } else {\n              reject({\n                status: 403,\n                message: 'Old password is incorrect, access denied!'\n              });\n            }\n          }).catch(function () {\n            reject({\n              status: 500,\n              message: 'bcrypt error'\n            });\n          });\n        }).catch(function (error) {\n          reject({\n            status: 500,\n            error: error\n          });\n        });\n      });\n    }\n  }, {\n    key: 'updateEmail',\n    value: function updateEmail(req, res) {\n      var _this6 = this;\n\n      return new Promise(function (fulfill, reject) {\n        var uid = res.locals.user.id;\n        var newEmail = req.body.email;\n        _this6.UsersModel.findById(uid).then(function (user) {\n          if (newEmail !== user.email) {\n            // TODO send an email to the user\n            fulfill({\n              status: 200,\n              message: 'Activation code has been sent to your new email!'\n            });\n          } else {\n            reject({\n              status: 400,\n              message: 'New email is same as old'\n            });\n          }\n        }).catch(function (error) {\n          reject({\n            status: 500,\n            error: error\n          });\n        });\n      });\n    }\n  }, {\n    key: 'updateAvatar',\n    value: function updateAvatar(req, res) {\n      var _this7 = this;\n\n      return new Promise(function (fulfill, reject) {\n        var uid = res.locals.user.id;\n        var photo = req.files ? req.files[0] : undefined;\n\n        if (photo) {\n          var fileExtension = photo.mimetype.split('/')[1];\n          var img = ['jpg', 'jpeg', 'png'];\n          if (img.indexOf(fileExtension) >= 0) {\n\n            var currentTime = new Date().getTime();\n\n            var newFileName = '' + (photo.destination + uid + '.' + currentTime + '.' + fileExtension);\n            _fs2.default.renameSync(photo.path, newFileName);\n            _cloudinary2.default.uploader.upload(newFileName, function (result) {\n              _fs2.default.unlinkSync(newFileName);\n              var update = { photo: result.secure_url };\n              _this7.UsersModel.findByIdAndUpdate(uid, update).then(function (user) {\n                fulfill({\n                  status: 200,\n                  message: 'Profile picture updated!',\n                  data: Object.assign(user, update)\n                }).catch(function (error) {\n                  reject({\n                    status: 500,\n                    error: error\n                  });\n                });\n              });\n            });\n          } else {\n            reject({\n              status: 400,\n              message: 'You can only use an image as an avatar'\n            });\n          }\n        } else {\n          reject({\n            status: 400,\n            message: 'No image selected!'\n          });\n        }\n      });\n    }\n  }, {\n    key: 'remove',\n    value: function remove(req, res) {\n      var _this8 = this;\n\n      return new Promise(function (fulfill, reject) {\n        var uid = res.locals.user.id;\n        _this8.UsersModel.remove({ _id: uid }).then(function () {\n          fulfill({\n            status: 200,\n            message: 'Your account has been deleted!'\n          });\n        }).catch(function () {\n          reject({\n            status: 500,\n            message: 'Unable to delete account!'\n          });\n        });\n      });\n    }\n\n    /**\n      * @method search\n      * @param {Object} userObject\n      * @desc allows you search for a user based on username or fullname or email\n      * @return {Promise} a promise object\n    */\n\n  }, {\n    key: 'search',\n    value: function search(req, userObject) {\n      var _this9 = this;\n\n      return new Promise(function (fulfill, reject) {\n        var limit = parseInt(req.query.limit) || 5;\n        var page = parseInt(req.query.page) || 0;\n\n        var username = userObject.username,\n            fullname = userObject.fullname,\n            email = userObject.email;\n\n        var pattern = { $or: [] };\n\n        if (username) {\n          var u = { $regex: new RegExp(username, 'ig') };\n          pattern['$or'].push({ username: u });\n        }\n\n        if (fullname) {\n          var f = { $regex: new RegExp(fullname, 'ig') };\n          pattern['$or'].push({ fullname: f });\n        }\n\n        if (email) {\n          var e = { $regex: new RegExp(email, 'ig') };\n          pattern['$or'].push({ email: e });\n        }\n\n        _this9.UsersModel.find(pattern).skip(page * limit).limit(limit).then(function (result) {\n          if (result.length) {\n            fulfill({\n              status: 200,\n              message: 'Search results found:',\n              data: result\n            });\n          } else {\n            reject({\n              status: 404,\n              message: 'Search result not found!'\n            });\n          }\n        }).catch(function (error) {\n          reject({\n            status: 500,\n            error: error\n          });\n        });\n      });\n    }\n  }]);\n\n  return UsersModel;\n}();\n\nexports.default = UsersModel;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hcHAvbW9kZWxzL1VzZXJzTW9kZWwuanM/NWEyNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IGJjcnlwdCBmcm9tICdiY3J5cHQnO1xuaW1wb3J0IGp3dCBmcm9tICdqc29ud2VidG9rZW4nO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBjbG91ZGluYXJ5IGZyb20gJ2Nsb3VkaW5hcnknO1xuaW1wb3J0IFVzZXJzU2NoZW1hIGZyb20gJy4uL3NjaGVtYS9Vc2Vyc1NjaGVtYSc7XG5pbXBvcnQgVmFsaWRhdGlvbiBmcm9tICcuLi9oZWxwZXJzL1ZhbGlkYXRpb24nO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuLi9jb25maWcnO1xuXG4vKipcbiAgKiBAY2xhc3MgVXNlcnNNb2RlbFxuICAqIEBkZXNjIFRoZSB1c2VybW9kZWwgY29udGFpbmluZyBhY3R1YWwgZnVuY3Rpb25hbGl0aWVzXG4gICpcbiovXG5jbGFzcyBVc2Vyc01vZGVsIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5Vc2Vyc01vZGVsID0gIG1vbmdvb3NlLm1vZGVsKCd1c2VycycsIFVzZXJzU2NoZW1hKTtcbiAgfVxuXG4gIC8qKlxuICAgICogQG1ldGhpZCBsb2dpblxuICAgICogQHBhcmFtIHtPYmplY3R9XG4gICAgKiBAZGVzYyB2ZXJpZmllcyB0aGF0IHRoZSBhY2NvdW50IHdpdGggY2VydGFpbiBjcmVkZW50aWFscyBleGlzdHNcbiAgICAqIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSBvYmplY3RcbiAgKi9cbiAgbG9naW4ocmVxKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGVtYWlsID0gcmVxLmJvZHkuZW1haWw7XG4gICAgICBjb25zdCBwYXNzd29yZCA9IHJlcS5ib2R5LnBhc3N3b3JkO1xuXG4gICAgICBpZighZW1haWwgfHwgIXBhc3N3b3JkKSB7XG4gICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgICAgbWVzc2FnZTogJ0VtYWlsIGFuZCBwYXNzd29yZCBpcyByZXF1aXJlZCEnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5Vc2Vyc01vZGVsLmZpbmRPbmUoe1xuICAgICAgICBlbWFpbFxuICAgICAgfSlcbiAgICAgIC50aGVuKCh1c2VyKSA9PiB7XG4gICAgICAgIGJjcnlwdC5jb21wYXJlKHBhc3N3b3JkLCB1c2VyLnBhc3N3b3JkKVxuICAgICAgICAudGhlbigocGFzc3dvcmRNYXRjaCkgPT4ge1xuICAgICAgICAgIGlmKHBhc3N3b3JkTWF0Y2gpIHtcbiAgICAgICAgICAgY29uc3QgdXNlclBheWxvYWQgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlci51c2VybmFtZSxcbiAgICAgICAgICAgIGlkOiB1c2VyLl9pZCxcbiAgICAgICAgICAgIGZ1bGxuYW1lOiB1c2VyLmZ1bGxuYW1lXG4gICAgICAgICAgIH07XG4gICAgICAgICAgIGZ1bGZpbGwoe1xuICAgICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgICBtZXNzYWdlOiAnTG9naW4gc3VjY2Vzc2Z1bCcsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgIHRva2VuOiBqd3Quc2lnbih1c2VyUGF5bG9hZCwgY29uZmlnLmF1dGhfc2VjcmV0LCB7IGV4cGlyZXNJbjonMjRoJyB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7ICAgICAgICAgICAgXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgICAgIHN0YXR1czogNDAwLFxuICAgICAgICAgICAgICBtZXNzYWdlOiAnSW52YWxpZCBlbWFpbCBhbmQgcGFzc3dvcmQgY29tYmluYXRpb24hJ1xuICAgICAgICAgICAgfSk7ICAgICAgICAgICAgXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgICAgbWVzc2FnZTogJ0ludmFsaWQgZW1haWwgYW5kIHBhc3N3b3JkIGNvbWJpbmF0aW9uJ1xuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICAqIEBtZXRob2QgYWRkVXNlclxuICAgICogQHBhcmFtIHtPYmplY3R9IHJlcVxuICAgICogQGRlc2MgdGhpcyBjcmVhdGVzIGEgdW5pcXVlIHVzZXIgaW4gdGhlIGRhdGFiYXNlXG4gICAgKiBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2Ugb2JqZWN0XG4gICAgKlxuICAqL1xuICBhZGRVc2VyKHJlcSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XG5cbiAgICAgIGNvbnN0IGVycm9ycyA9IHt9O1xuICAgICAgY29uc3QgdXNlcm5hbWUgPSByZXEuYm9keS51c2VybmFtZTtcbiAgICAgIGNvbnN0IGZ1bGxuYW1lID0gcmVxLmJvZHkuZnVsbG5hbWUgPyByZXEuYm9keS5mdWxsbmFtZSA6IHVzZXJuYW1lO1xuICAgICAgY29uc3QgZW1haWwgPSByZXEuYm9keS5lbWFpbDtcbiAgICAgIGNvbnN0IHBhc3N3b3JkICA9IHJlcS5ib2R5LnBhc3N3b3JkO1xuXG4gICAgICBpZighdXNlcm5hbWUpIHtcbiAgICAgICAgZXJyb3JzLnVzZXJuYW1lID0gJ1VzZXJuYW1lIGlzIHJlcXVpcmVkJztcbiAgICAgIH1cblxuICAgICAgaWYoIWVtYWlsKSB7XG4gICAgICAgIGVycm9ycy5lbWFpbCA9ICdFbWFpbCBhZGRyZXNzIGlzIHJlcXVpcmVkJztcbiAgICAgIH1cblxuICAgICAgaWYoIXBhc3N3b3JkKSB7XG4gICAgICAgIGVycm9ycy5wYXNzd29yZCA9ICdZb3VcXCd2ZSBub3QgY2hvc2VuIGEgcGFzc3dvcmQnO1xuICAgICAgfVxuXG4gICAgICBpZihPYmplY3Qua2V5cyhlcnJvcnMpLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgLy8gbm8gZXJyb3JzXG4gICAgICAgIGJjcnlwdC5oYXNoKHBhc3N3b3JkLCAxMClcbiAgICAgICAgLnRoZW4oKGhhc2gpID0+IHtcbiAgICAgICAgICBjb25zdCBuZXdVc2VyICA9IHtcbiAgICAgICAgICAgIGZ1bGxuYW1lLFxuICAgICAgICAgICAgdXNlcm5hbWUsXG4gICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgIHBhc3N3b3JkOiBoYXNoXG4gICAgICAgICAgfTtcbiAgICAgICAgICBjb25zdCBVc2VyID0gbmV3IHRoaXMuVXNlcnNNb2RlbChuZXdVc2VyKTtcbiAgICAgICAgICBVc2VyLnNhdmUoKVxuICAgICAgICAgIC50aGVuKCh1c2VyKSA9PiB7XG4gICAgICAgICAgICBmdWxmaWxsKHtcbiAgICAgICAgICAgICAgc3RhdHVzOiAyMDEsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdVc2VyIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5JyxcbiAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXIuX2lkLCBcbiAgICAgICAgICAgICAgICB0b2tlbjogand0LnNpZ24odXNlciwgY29uZmlnLmF1dGhfc2VjcmV0LCB7IGV4cGlyZXNJbjogJzI0aCd9KX1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JNc2cgPSBWYWxpZGF0aW9uLnJlc29sdmVNb25nb29zZUVycm9yTXNnKGVycm9yKTtcbiAgICAgICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgICAgIHN0YXR1czogNDAwLFxuICAgICAgICAgICAgICBtZXNzYWdlOiAnWW91IGhhdmUgZXJyb3JzIGluIHRoZSBzdWJtaXR0ZWQgZm9ybScsXG4gICAgICAgICAgICAgIGRhdGE6IGVycm9yTXNnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTsgICAgICAgICAgXG4gICAgICAgIH0pO1xuICAgICAgfSBcbiAgICAgIGVsc2Uge1xuICAgICAgICByZWplY3Qoe1xuICAgICAgICAgIHN0YXR1czogNDAwLFxuICAgICAgICAgIG1lc3NhZ2U6ICdZb3UgaGF2ZSBlcnJvcnMgaW4gdGhlIHN1Ym1pdHRlZCBmb3JtJyxcbiAgICAgICAgICBkYXRhOiBlcnJvcnNcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICAqIEBtZXRob2QgZ2V0VXNlcnNcbiAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXFcbiAgICAqIEBkZXNjIGdldCB1c2VycyBpbiB0aGUgc3lzdGVtXG4gICAgKiBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2Ugb2JqZWN0XG4gICovXG4gIGdldFVzZXJzKHJlcSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCB1c2VybmFtZSA9IHJlcS5xdWVyeS51c2VyO1xuICAgICAgY29uc3QgcGFnZSA9IHJlcS5xdWVyeS5wYWdlO1xuICAgICAgY29uc3QgbGltaXQgPSBwYXJzZUludChyZXEucXVlcnkubGltaXQpIHx8IDEwO1xuXG4gICAgICBsZXQgZmluZEJ5ID0ge307XG5cbiAgICAgIGlmKHVzZXJuYW1lKSB7XG4gICAgICAgIGZpbmRCeSA9IHsgdXNlcm5hbWUgfTtcbiAgICAgIH1cblxuICAgICAgaWYodXNlcm5hbWUpIHtcbiAgICAgICAgdGhpcy5Vc2Vyc01vZGVsLmZpbmRPbmUoeyB1c2VybmFtZSB9KVxuICAgICAgICAudGhlbigodXNlcikgPT4ge1xuICAgICAgICAgIGZ1bGZpbGwoe1xuICAgICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgICBtZXNzYWdlOiAnVXNlciBmb3VuZCEnLFxuICAgICAgICAgICAgZGF0YTogdXNlclxuICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYocGFnZSkge1xuICAgICAgICB0aGlzLlVzZXJzTW9kZWwuZmluZCgpXG4gICAgICAgIC5za2lwKHBhZ2UgKiBsaW1pdClcbiAgICAgICAgLmxpbWl0KGxpbWl0KVxuICAgICAgICAudGhlbigodXNlcnMpID0+IHtcbiAgICAgICAgICBmdWxmaWxsKHtcbiAgICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgICAgbWVzc2FnZTogJ3BhZ2luYXRlZCB1c2VycyBsaXN0ZWQnLFxuICAgICAgICAgICAgZGF0YTogdXNlcnNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdBbiBlcnJvciBvY2N1cmVkIScsXG4gICAgICAgICAgICBkYXRhOiBlcnJvclxuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuVXNlcnNNb2RlbC5maW5kKClcbiAgICAgICAgLnRoZW4oKHVzZXJzKSA9PiB7XG4gICAgICAgICAgZnVsZmlsbCh7XG4gICAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdhbGwgdXNlcnMgbGlzdGVkJyxcbiAgICAgICAgICAgIGRhdGE6IHVzZXJzXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgICAgICBtZXNzYWdlOiAnQW4gZXJyb3Igb2NjdXJlZCEnLFxuICAgICAgICAgICAgZGF0YTogZXJyb3JcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7ICAgICAgICBcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgIEBtZXRob2QgdXBkYXRlXG4gICAgQHBhcmFtIHtPYmplY3R9IHJlcVxuICAgIEBwYXJhbSB7T2JqZWN0fSByZXNcbiAgICBAZGVzYyBwcm92aWRlIGFiaWxpdHkgdG8gdXBkYXRlIGJhc2ljIHVzZXIgcHJvZmlsZSBkZXRhaWxzXG4gICAgQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIG9iamVjdFxuICAqL1xuICB1cGRhdGUocmVxLCByZXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgdWlkID0gcmVzLmxvY2Fscy51c2VyLmlkO1xuICAgICAgY29uc3QgZnVsbG5hbWUgPSByZXEuYm9keS5mdWxsbmFtZTtcbiAgICAgIGNvbnN0IHVzZXJuYW1lID0gcmVxLmJvZHkudXNlcm5hbWU7XG4gICAgICBjb25zdCBiaW8gPSByZXEuYm9keS5iaW87XG4gICAgICBjb25zdCBnZW5kZXIgPSByZXEuYm9keS5nZW5kZXI7XG4gICAgICBjb25zdCBwaG9uZSA9IHJlcS5ib2R5LnBob25lO1xuICAgICAgY29uc3QgdXBkYXRlID0ge307XG5cblxuICAgICAgaWYoZnVsbG5hbWUgJiYgZnVsbG5hbWUudHJpbSgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdXBkYXRlLmZ1bGxuYW1lID0gZnVsbG5hbWU7XG4gICAgICB9XG5cbiAgICAgIGlmKHVzZXJuYW1lICYmIHVzZXJuYW1lLnRyaW0oKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHVwZGF0ZS51c2VybmFtZSA9IHVzZXJuYW1lO1xuICAgICAgfVxuXG4gICAgICBpZihiaW8gJiYgYmlvLnRyaW0oKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHVwZGF0ZS5iaW8gPSBiaW87XG4gICAgICB9XG5cbiAgICAgIGlmKGdlbmRlciAmJiBnZW5kZXIudHJpbSgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdXBkYXRlLmdlbmRlciA9IGdlbmRlcjtcbiAgICAgIH1cblxuICAgICAgaWYocGhvbmUgJiYgcGhvbmUudHJpbSgpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdXBkYXRlLnBob25lID0gcGhvbmU7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuVXNlcnNNb2RlbC5maW5kQnlJZEFuZFVwZGF0ZSh1aWQsIHVwZGF0ZSlcbiAgICAgIC50aGVuKCh1c2VyKSA9PiB7XG4gICAgICAgIGZ1bGZpbGwoe1xuICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgIG1lc3NhZ2U6ICdVc2VyIHVwZGF0ZWQnLFxuICAgICAgICAgIGRhdGE6IE9iamVjdC5hc3NpZ24odXNlciwgdXBkYXRlKVxuICAgICAgICB9KTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgICAgZXJyb3JcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuXG4gICAgfSk7XG4gIH1cblxuICB1cGRhdGVQYXNzd29yZChyZXEsIHJlcykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XG5cbiAgICAgIGNvbnN0IHVpZCA9IHJlcy5sb2NhbHMudXNlci5pZDtcbiAgICAgIGNvbnN0IG9sZFBhc3N3b3JkID0gcmVxLmJvZHkub2xkUGFzc3dvcmQ7XG4gICAgICBjb25zdCBuZXdQYXNzd29yZCA9IHJlcS5ib2R5Lm5ld1Bhc3N3b3JkO1xuICAgICAgY29uc3QgY29uZmlybVBhc3N3b3JkID0gcmVxLmJvZHkuY29uZmlybVBhc3N3b3JkO1xuXG4gICAgICB0aGlzLlVzZXJzTW9kZWwuZmluZEJ5SWQodWlkKVxuICAgICAgLnRoZW4oKHVzZXIpID0+IHtcbiAgICAgICAgYmNyeXB0LmNvbXBhcmUob2xkUGFzc3dvcmQsIHVzZXIucGFzc3dvcmQpXG4gICAgICAgIC50aGVuKChwYXNzd29yZE1hdGNoKSA9PiB7XG4gICAgICAgICAgaWYocGFzc3dvcmRNYXRjaCl7XG4gICAgICAgICAgICBpZihuZXdQYXNzd29yZCA9PT0gY29uZmlybVBhc3N3b3JkKSB7XG4gICAgICAgICAgICAgIGJjcnlwdC5oYXNoKG5ld1Bhc3N3b3JkLCAxMClcbiAgICAgICAgICAgICAgLnRoZW4oKGhhc2gpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLlVzZXJzTW9kZWwuZmluZEJ5SWRBbmRVcGRhdGUodWlkLCB7IHBhc3N3b3JkOiBoYXNoIH0pXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgZnVsZmlsbCh7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUGFzc3dvcmQgdXBkYXRlZCBzdWNjZXNzZnVsbHkhJ1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1VuYWJsZSB0byB1cGRhdGUgbW9kZWwnLFxuICAgICAgICAgICAgICAgICAgICBlcnJvclxuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVW5hYmxlIHRvIHByb2Nlc3MgcGFzc3dvcmQgY2hhbmdlJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnWW91ciBuZXcgcGFzc3dvcmQgZG8gbm90IG1hdGNoJ1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICAgICAgc3RhdHVzOiA0MDMsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdPbGQgcGFzc3dvcmQgaXMgaW5jb3JyZWN0LCBhY2Nlc3MgZGVuaWVkISdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdiY3J5cHQgZXJyb3InXG4gICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICByZWplY3Qoe1xuICAgICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICAgIGVycm9yXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZUVtYWlsKHJlcSwgcmVzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHVpZCA9IHJlcy5sb2NhbHMudXNlci5pZDtcbiAgICAgIGNvbnN0IG5ld0VtYWlsID0gcmVxLmJvZHkuZW1haWw7XG4gICAgICB0aGlzLlVzZXJzTW9kZWwuZmluZEJ5SWQodWlkKVxuICAgICAgLnRoZW4oKHVzZXIpID0+IHtcbiAgICAgICAgaWYobmV3RW1haWwgIT09IHVzZXIuZW1haWwpIHtcbiAgICAgICAgICAvLyBUT0RPIHNlbmQgYW4gZW1haWwgdG8gdGhlIHVzZXJcbiAgICAgICAgICBmdWxmaWxsKHtcbiAgICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0FjdGl2YXRpb24gY29kZSBoYXMgYmVlbiBzZW50IHRvIHlvdXIgbmV3IGVtYWlsISdcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdOZXcgZW1haWwgaXMgc2FtZSBhcyBvbGQnXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgICBlcnJvclxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlQXZhdGFyKHJlcSwgcmVzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHVpZCA9IHJlcy5sb2NhbHMudXNlci5pZDtcbiAgICAgIGNvbnN0IHBob3RvID0gKHJlcS5maWxlcykgPyByZXEuZmlsZXNbMF0gOiB1bmRlZmluZWQ7XG5cbiAgICAgIGlmKHBob3RvKSB7XG4gICAgICAgIGNvbnN0IGZpbGVFeHRlbnNpb24gPSAgcGhvdG8ubWltZXR5cGUuc3BsaXQoJy8nKVsxXTtcbiAgICAgICAgY29uc3QgaW1nID0gWydqcGcnLCAnanBlZycsICdwbmcnXTtcbiAgICAgICAgaWYoaW1nLmluZGV4T2YoZmlsZUV4dGVuc2lvbikgPj0gMCkge1xuXG4gICAgICAgICAgbGV0IGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgICAgICAgICBsZXQgbmV3RmlsZU5hbWUgPSBcbiAgICAgICAgICBgJHtwaG90by5kZXN0aW5hdGlvbiArIHVpZCArICcuJyArIGN1cnJlbnRUaW1lICsgJy4nICsgZmlsZUV4dGVuc2lvbn1gO1xuICAgICAgICAgIGZzLnJlbmFtZVN5bmMocGhvdG8ucGF0aCwgbmV3RmlsZU5hbWUpO1xuICAgICAgICAgIGNsb3VkaW5hcnkudXBsb2FkZXIudXBsb2FkKG5ld0ZpbGVOYW1lLCAocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBmcy51bmxpbmtTeW5jKG5ld0ZpbGVOYW1lKTtcbiAgICAgICAgICAgIGxldCB1cGRhdGUgPSB7IHBob3RvOiByZXN1bHQuc2VjdXJlX3VybCB9O1xuICAgICAgICAgICAgdGhpcy5Vc2Vyc01vZGVsLmZpbmRCeUlkQW5kVXBkYXRlKHVpZCwgdXBkYXRlKVxuICAgICAgICAgICAgLnRoZW4oKHVzZXIpID0+IHtcbiAgICAgICAgICAgICAgZnVsZmlsbCh7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1Byb2ZpbGUgcGljdHVyZSB1cGRhdGVkIScsXG4gICAgICAgICAgICAgICAgZGF0YTogT2JqZWN0LmFzc2lnbih1c2VyLCB1cGRhdGUpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgICAgICAgICAgICBlcnJvclxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgICAgICBtZXNzYWdlOiAnWW91IGNhbiBvbmx5IHVzZSBhbiBpbWFnZSBhcyBhbiBhdmF0YXInXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgICBtZXNzYWdlOiAnTm8gaW1hZ2Ugc2VsZWN0ZWQhJ1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcmVtb3ZlKHJlcSwgcmVzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHVpZCA9IHJlcy5sb2NhbHMudXNlci5pZDtcbiAgICAgIHRoaXMuVXNlcnNNb2RlbC5yZW1vdmUoeyBfaWQgOiB1aWQgfSlcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgZnVsZmlsbCh7XG4gICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgbWVzc2FnZTogJ1lvdXIgYWNjb3VudCBoYXMgYmVlbiBkZWxldGVkISdcbiAgICAgICAgfSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgICBtZXNzYWdlOiAnVW5hYmxlIHRvIGRlbGV0ZSBhY2NvdW50ISdcbiAgICAgICAgfSlcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAgKiBAbWV0aG9kIHNlYXJjaFxuICAgICogQHBhcmFtIHtPYmplY3R9IHVzZXJPYmplY3RcbiAgICAqIEBkZXNjIGFsbG93cyB5b3Ugc2VhcmNoIGZvciBhIHVzZXIgYmFzZWQgb24gdXNlcm5hbWUgb3IgZnVsbG5hbWUgb3IgZW1haWxcbiAgICAqIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSBvYmplY3RcbiAgKi9cbiAgc2VhcmNoKHJlcSwgdXNlck9iamVjdCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHJlcS5xdWVyeS5saW1pdCkgfHwgNTtcbiAgICAgIGNvbnN0IHBhZ2UgPSBwYXJzZUludChyZXEucXVlcnkucGFnZSkgfHwgMDtcblxuICAgICAgY29uc3QgeyB1c2VybmFtZSwgZnVsbG5hbWUsIGVtYWlsIH0gPSB1c2VyT2JqZWN0O1xuICAgICAgY29uc3QgcGF0dGVybiA9IHsgJG9yOiBbXX07XG5cbiAgICAgIGlmKHVzZXJuYW1lKSB7XG4gICAgICAgIGxldCB1ID0geyAkcmVnZXg6IG5ldyBSZWdFeHAodXNlcm5hbWUsICdpZycpIH07XG4gICAgICAgIHBhdHRlcm5bJyRvciddLnB1c2goeyB1c2VybmFtZTogdSAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmKGZ1bGxuYW1lKSB7XG4gICAgICAgIGxldCBmID0geyAkcmVnZXg6IG5ldyBSZWdFeHAoZnVsbG5hbWUsICdpZycpIH07XG4gICAgICAgIHBhdHRlcm5bJyRvciddLnB1c2goeyBmdWxsbmFtZTogZiAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmKGVtYWlsKSB7XG4gICAgICAgIGxldCBlID0geyAkcmVnZXg6IG5ldyBSZWdFeHAoZW1haWwsICdpZycpIH07XG4gICAgICAgIHBhdHRlcm5bJyRvciddLnB1c2goeyBlbWFpbDogZSAgfSk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuVXNlcnNNb2RlbC5maW5kKHBhdHRlcm4pXG4gICAgICAuc2tpcChwYWdlICogbGltaXQpXG4gICAgICAubGltaXQobGltaXQpXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIGlmKHJlc3VsdC5sZW5ndGgpIHtcbiAgICAgICAgICBmdWxmaWxsKHtcbiAgICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgICAgbWVzc2FnZTogJ1NlYXJjaCByZXN1bHRzIGZvdW5kOicsXG4gICAgICAgICAgICBkYXRhOiByZXN1bHRcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgc3RhdHVzOiA0MDQsXG4gICAgICAgICAgICBtZXNzYWdlOiAnU2VhcmNoIHJlc3VsdCBub3QgZm91bmQhJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgICAgZXJyb3JcbiAgICAgICAgfSk7XG4gICAgICB9KVxuICAgIH0pO1xuICB9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXNlcnNNb2RlbDtcblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFwcC9tb2RlbHMvVXNlcnNNb2RlbC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7O0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OztBQU1BO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQURBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFIQTtBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUFPQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBTUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FBT0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUVBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFNQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQU1BO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFBQTtBQUFBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBOzs7Ozs7QUFJQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///5\n");

/***/ }),
/* 6 */
/*!***********************************!*\
  !*** ./app/helpers/Validation.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n @class Validation\n @desc helper class to provide static validation methods\n */\nvar Validation = function () {\n  function Validation() {\n    _classCallCheck(this, Validation);\n  }\n\n  _createClass(Validation, null, [{\n    key: 'isAllowedString',\n\n    /**\n     @method filterString\n     @param {String} str\n     @desc test if a string only contains alphanumeric and underscores\n     @return {Boolean} returns true if it passes the test\n     */\n    value: function isAllowedString(str) {\n      var re = /^\\w+$/g;\n      return re.test(str);\n    }\n\n    /**\n     @method isValidUsername\n     @param {String} username\n     @desc asserts that the username does not contain a space\n     @return {Boolean} return true if the assertions passes\n     */\n\n  }, {\n    key: 'isValidUsername',\n    value: function isValidUsername(username) {\n      if (Validation.isAllowedString(username)) {\n        // ensure the username does not contain a whitespace\n        return username.indexOf(' ') < 0;\n      }\n      return false;\n    }\n\n    /**\n     @method isValidEmail\n     @param {String} email\n     @desc checks if a provided email address is valid\n     @return {Boolean} returns true if the emails is valid\n     */\n\n  }, {\n    key: 'isValidEmail',\n    value: function isValidEmail(email) {\n      var re = /[a-z,0-9]/ig;\n      var dotPos = email.lastIndexOf('.');\n      var atPos = email.lastIndexOf('@');\n      var whitespace = email.lastIndexOf(' ');\n      var atPosMinus = email.substring(atPos - 1, atPos);\n      return atPos > 0 && dotPos > atPos && whitespace < 0 && re.test(atPosMinus);\n    }\n\n    /**\n      @method resolveMongooseErrorMsg\n      @param {Object} errors\n      @desc accepts mongoose models errors and break it into one statement\n      @return {String} the final statement \n    */\n\n  }, {\n    key: 'resolveMongooseErrorMsg',\n    value: function resolveMongooseErrorMsg(errors) {\n      if (errors) {\n        if (errors.hasOwnProperty('code')) {\n          if (errors.code === 11000) {\n            // a duplicate key error ocured\n            var msg = errors.errmsg;\n            var key = msg.split(':')[2].split(' ')[1].split('_').shift().toString();\n            var value = errors.getOperation()[key];\n            return 'This ' + key + ' \\'' + value + '\\' already exists!';\n          }\n        } else if (errors.hasOwnProperty('errors')) {\n          // a regular validation error occured\n          var _key = Object.keys(errors.errors)[0];\n          return errors.errors[_key].message;\n        }\n      }\n      return 'Uknown error! Please contact for support'; // if we are unable to decipher what happened!\n    }\n  }]);\n\n  return Validation;\n}();\n\nexports.default = Validation;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hcHAvaGVscGVycy9WYWxpZGF0aW9uLmpzPzg4Y2UiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gQGNsYXNzIFZhbGlkYXRpb25cbiBAZGVzYyBoZWxwZXIgY2xhc3MgdG8gcHJvdmlkZSBzdGF0aWMgdmFsaWRhdGlvbiBtZXRob2RzXG4gKi9cbmNsYXNzIFZhbGlkYXRpb24ge1xuICAvKipcbiAgIEBtZXRob2QgZmlsdGVyU3RyaW5nXG4gICBAcGFyYW0ge1N0cmluZ30gc3RyXG4gICBAZGVzYyB0ZXN0IGlmIGEgc3RyaW5nIG9ubHkgY29udGFpbnMgYWxwaGFudW1lcmljIGFuZCB1bmRlcnNjb3Jlc1xuICAgQHJldHVybiB7Qm9vbGVhbn0gcmV0dXJucyB0cnVlIGlmIGl0IHBhc3NlcyB0aGUgdGVzdFxuICAgKi9cbiAgc3RhdGljIGlzQWxsb3dlZFN0cmluZyhzdHIpIHtcbiAgICBjb25zdCByZSA9IC9eXFx3KyQvZztcbiAgICByZXR1cm4gcmUudGVzdChzdHIpO1xuICB9XG5cbiAgLyoqXG4gICBAbWV0aG9kIGlzVmFsaWRVc2VybmFtZVxuICAgQHBhcmFtIHtTdHJpbmd9IHVzZXJuYW1lXG4gICBAZGVzYyBhc3NlcnRzIHRoYXQgdGhlIHVzZXJuYW1lIGRvZXMgbm90IGNvbnRhaW4gYSBzcGFjZVxuICAgQHJldHVybiB7Qm9vbGVhbn0gcmV0dXJuIHRydWUgaWYgdGhlIGFzc2VydGlvbnMgcGFzc2VzXG4gICAqL1xuICBzdGF0aWMgaXNWYWxpZFVzZXJuYW1lKHVzZXJuYW1lKSB7XG4gICAgaWYgKFZhbGlkYXRpb24uaXNBbGxvd2VkU3RyaW5nKHVzZXJuYW1lKSkge1xuICAgICAgLy8gZW5zdXJlIHRoZSB1c2VybmFtZSBkb2VzIG5vdCBjb250YWluIGEgd2hpdGVzcGFjZVxuICAgICAgcmV0dXJuICh1c2VybmFtZS5pbmRleE9mKCcgJykgPCAwKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICBAbWV0aG9kIGlzVmFsaWRFbWFpbFxuICAgQHBhcmFtIHtTdHJpbmd9IGVtYWlsXG4gICBAZGVzYyBjaGVja3MgaWYgYSBwcm92aWRlZCBlbWFpbCBhZGRyZXNzIGlzIHZhbGlkXG4gICBAcmV0dXJuIHtCb29sZWFufSByZXR1cm5zIHRydWUgaWYgdGhlIGVtYWlscyBpcyB2YWxpZFxuICAgKi9cbiAgc3RhdGljIGlzVmFsaWRFbWFpbChlbWFpbCkge1xuICAgIGNvbnN0IHJlID0gL1thLXosMC05XS9pZztcbiAgICBjb25zdCBkb3RQb3MgPSBlbWFpbC5sYXN0SW5kZXhPZignLicpO1xuICAgIGNvbnN0IGF0UG9zID0gZW1haWwubGFzdEluZGV4T2YoJ0AnKTtcbiAgICBjb25zdCB3aGl0ZXNwYWNlID0gZW1haWwubGFzdEluZGV4T2YoJyAnKTtcbiAgICBjb25zdCBhdFBvc01pbnVzID0gZW1haWwuc3Vic3RyaW5nKGF0UG9zIC0gMSwgYXRQb3MpO1xuICAgIHJldHVybiAoYXRQb3MgPiAwICYmIGRvdFBvcyA+IGF0UG9zICYmXG4gICAgICB3aGl0ZXNwYWNlIDwgMCAmJiByZS50ZXN0KGF0UG9zTWludXMpKTtcbiAgfVxuXG4gIC8qKlxuICAgIEBtZXRob2QgcmVzb2x2ZU1vbmdvb3NlRXJyb3JNc2dcbiAgICBAcGFyYW0ge09iamVjdH0gZXJyb3JzXG4gICAgQGRlc2MgYWNjZXB0cyBtb25nb29zZSBtb2RlbHMgZXJyb3JzIGFuZCBicmVhayBpdCBpbnRvIG9uZSBzdGF0ZW1lbnRcbiAgICBAcmV0dXJuIHtTdHJpbmd9IHRoZSBmaW5hbCBzdGF0ZW1lbnQgXG4gICovXG4gIHN0YXRpYyByZXNvbHZlTW9uZ29vc2VFcnJvck1zZyhlcnJvcnMpIHtcbiAgICBpZihlcnJvcnMpIHtcbiAgICAgIGlmKGVycm9ycy5oYXNPd25Qcm9wZXJ0eSgnY29kZScpKSB7XG4gICAgICAgIGlmKGVycm9ycy5jb2RlID09PSAxMTAwMCkge1xuICAgICAgICAgIC8vIGEgZHVwbGljYXRlIGtleSBlcnJvciBvY3VyZWRcbiAgICAgICAgICBjb25zdCBtc2cgPSBlcnJvcnMuZXJybXNnO1xuICAgICAgICAgIGNvbnN0IGtleSA9IFxuICAgICAgICAgIG1zZy5zcGxpdCgnOicpWzJdLnNwbGl0KCcgJylbMV0uc3BsaXQoJ18nKS5zaGlmdCgpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgY29uc3QgdmFsdWUgPSBlcnJvcnMuZ2V0T3BlcmF0aW9uKClba2V5XTtcbiAgICAgICAgICByZXR1cm4gYFRoaXMgJHtrZXl9ICcke3ZhbHVlfScgYWxyZWFkeSBleGlzdHMhYDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmKGVycm9ycy5oYXNPd25Qcm9wZXJ0eSgnZXJyb3JzJykpIHtcbiAgICAgICAgLy8gYSByZWd1bGFyIHZhbGlkYXRpb24gZXJyb3Igb2NjdXJlZFxuICAgICAgICBjb25zdCBrZXkgPSBPYmplY3Qua2V5cyhlcnJvcnMuZXJyb3JzKVswXTtcbiAgICAgICAgcmV0dXJuIGVycm9ycy5lcnJvcnNba2V5XS5tZXNzYWdlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gJ1Vrbm93biBlcnJvciEgUGxlYXNlIGNvbnRhY3QgZm9yIHN1cHBvcnQnOyAvLyBpZiB3ZSBhcmUgdW5hYmxlIHRvIGRlY2lwaGVyIHdoYXQgaGFwcGVuZWQhXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVmFsaWRhdGlvbjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBhcHAvaGVscGVycy9WYWxpZGF0aW9uLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7Ozs7QUFJQTs7Ozs7Ozs7QUFDQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQUdBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///6\n");

/***/ }),
/* 7 */
/*!************************************!*\
  !*** ./app/models/HashTagModel.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _mongoose = __webpack_require__(/*! mongoose */ 0);\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _HashTagSchema = __webpack_require__(/*! ../schema/HashTagSchema */ 27);\n\nvar _HashTagSchema2 = _interopRequireDefault(_HashTagSchema);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar HashTagModel = function () {\n  function HashTagModel() {\n    _classCallCheck(this, HashTagModel);\n\n    this.HashTagModel = _mongoose2.default.model('hashtags', _HashTagSchema2.default);\n  }\n\n  /**\n    * @method search\n    * @param {String} title\n    * @desc provides ability to search for hashtags that have been saved\n    * @return {Promise} a promise object\n  */\n\n\n  _createClass(HashTagModel, [{\n    key: 'search',\n    value: function search(title) {\n      var _this = this;\n\n      return new Promise(function (fulfill, reject) {\n        _this.HashTagModel.findOne({\n          title: { $regex: new RegExp(title, 'ig') }\n        }).then(function (result) {\n          fulfill({\n            status: 200,\n            data: result\n          });\n        }).catch(function (error) {\n          reject({\n            status: 500,\n            error: error\n          });\n        });\n      });\n    }\n\n    /**\n      * @method searchSuggest\n      * @param {String} title\n      * @desc provides ability to suggest search for hashtags\n      * @return {Promise} a promise object\n    */\n\n  }, {\n    key: 'searchSuggest',\n    value: function searchSuggest(title) {\n      var _this2 = this;\n\n      return new Promise(function (fulfill, reject) {\n        _this2.HashTagModel.find({\n          title: { $regex: new RegExp(title, 'ig') }\n        }).select('title').limit(5).then(function (result) {\n          if (result.length) {\n            fulfill({\n              status: 200,\n              data: result\n            });\n          } else {\n            reject({\n              status: 404,\n              message: 'No result found!'\n            });\n          }\n        }).catch(function (error) {\n          reject({\n            status: 500,\n            error: error\n          });\n        });\n      });\n    }\n\n    /**\n      * @method delePost\n      * @param {String} title\n      * @param {String} post_id\n      * @desc allows you to remove a postId associated to the specified hashtag\n      * @return {Promise} a promise object\n    */\n\n  }, {\n    key: 'deletePost',\n    value: function deletePost(title, post_id) {\n      var _this3 = this;\n\n      return new Promise(function (fulfill, reject) {\n        _this3.HashTagModel.findOne({ title: title }).then(function (hashtag) {\n          if (hashtag) {\n            var post_ids = hashtag.post_ids;\n            var pos = post_ids.indexOf(post_id);\n\n            if (pos >= 0) {\n              post_ids.splice(pos, 1); // delete the post id from array\n              var total_posts = post_ids.length;\n              _this3.HashTagModel.update({ title: title }, { post_ids: post_ids, total_posts: total_posts }).then(function () {\n                fulfill({\n                  status: 200,\n                  message: 'hashtag details updated!'\n                });\n              }).catch(function (error) {\n                reject({\n                  status: 500,\n                  error: error\n                });\n              });\n            } else {\n              fulfill({\n                status: 200,\n                message: 'Hashtags and post were not associated!'\n              });\n            }\n          } else {\n            reject({\n              status: 404,\n              message: 'Unable to delete, hashtag not found!'\n            });\n          }\n        }).catch(function (error) {\n          reject({\n            status: 500,\n            error: error\n          });\n        });\n      });\n    }\n\n    /**\n      * @method deleteMultiple\n      * @param {Array} hashtags\n      * @param {Array} post_ids\n      * @desc deasociate specified hashtags from the specified post ids\n      * @return {Promise} a promise object\n    */\n\n  }, {\n    key: 'deleteMultiple',\n    value: function deleteMultiple(hashtags, post_ids) {\n      var _this4 = this;\n\n      return new Promise(function (fulfill, reject) {\n        hashtags = Array.from(new Set(hashtags)); // remove duplicate hastags\n\n        var cursor = post_ids.length - 1;\n        var cursor2 = hashtags.length - 1;\n        var d = function d() {\n          var c = function c() {\n            _this4.deletePost(hashtags[cursor2], post_ids[cursor]).then(function () {\n              cursor2 -= 1;\n              if (cursor2 >= 0) {\n                c();\n              } else if (cursor > 0) {\n                cursor -= 1;\n                cursor2 = hashtags.length - 1;\n                d();\n              } else {\n                fulfill({\n                  status: 200,\n                  message: 'Deleted multiple hashtags from posts'\n                });\n              }\n            }).catch(function (error) {\n              reject(error);\n            });\n          };\n          c();\n        };\n        d();\n      });\n    }\n\n    /**\n      * @method view\n      * @param {Object} req\n      * @desc allows you to view and sort all hashtags in the system\n      * @return {Promise} a promise object\n    */\n\n  }, {\n    key: 'view',\n    value: function view(req) {\n      var _this5 = this;\n\n      return new Promise(function (fulfill, reject) {\n        var orderBy = req.query.order_by;\n        var order = req.query.order;\n\n        switch (orderBy) {\n          case 'posts':\n            var direction = order === 'asc' ? -1 : 1;\n            _this5.HashTagModel.find().sort({ total_posts: direction }).then(function (hashtags) {\n              fulfill({\n                status: 200,\n                message: 'Hastags listed!',\n                data: hashtags\n              });\n            }).catch(function (error) {\n              reject({\n                status: 500,\n                error: error\n              });\n            });\n            break;\n          default:\n            _this5.HashTagModel.find().then(function (hashtags) {\n              fulfill({\n                status: 200,\n                message: 'Hastags listed!',\n                data: hashtags\n              });\n            }).catch(function (error) {\n              reject({\n                status: 500,\n                error: error,\n                message: 'Unable to list hashtags!'\n              });\n            });\n        }\n      });\n    }\n\n    /**\n      * @method save\n      * @param {String} title\n      * @param {String} id\n      * @desc associate a post id to the specified hashtag\n      @return {Promise} a promise object\n    */\n\n  }, {\n    key: 'save',\n    value: function save(title, id) {\n      var _this6 = this;\n\n      return new Promise(function (fulfill, reject) {\n        _this6.exists(title).catch(function () {\n          var hashtag = {\n            title: title,\n            post_ids: [id],\n            total_posts: 1\n          };\n          var newHashTag = new _this6.HashTagModel(hashtag);\n          newHashTag.save(function (tag) {\n            fulfill({\n              status: 201,\n              message: 'Hashtag saved',\n              data: tag\n            });\n          }).catch(function (error) {\n            reject({\n              status: 500,\n              error: error\n            });\n          });\n        }).then(function (tag) {\n          var post_ids = tag.post_ids;\n          if (post_ids.indexOf(id) < 0) {\n            post_ids.push(id);\n            _this6.HashTagModel.update({ title: title }, {\n              post_ids: post_ids,\n              total_posts: post_ids.length\n            }).then(function (oldTag) {\n              fulfill({\n                status: 201,\n                message: 'Hashtag saved',\n                data: Object.assign(oldTag, { post_ids: post_ids })\n              });\n            }).catch(function (error) {\n              reject({\n                status: 500,\n                error: error\n              });\n            });\n          } else {\n            fulfill({\n              status: 201,\n              message: 'Already saved hashtag!'\n            });\n          }\n        });\n      });\n    }\n\n    /**\n      * @method saveMultiple\n      * @param {Object} hashtags\n      * @desc automatically calls the save method to calculate total post while\n      * saving new hastags\n      * @return {Promise} a promise object\n    */\n\n  }, {\n    key: 'saveMultiple',\n    value: function saveMultiple(hashtags) {\n      var _this7 = this;\n\n      return new Promise(function (fulfill, reject) {\n        if (hashtags.length) {\n          var cursor = hashtags.length - 1;\n          var multipleSave = function multipleSave() {\n            _this7.save(hashtags[cursor].title, hashtags[cursor].post_id).then(function () {\n              cursor -= 1;\n              if (cursor === -1) {\n                fulfill({\n                  status: 201,\n                  message: 'Saved multiple hashtags!'\n                });\n              } else {\n                multipleSave();\n              }\n            }).catch(function (error) {\n              reject(error);\n            });\n          };\n          multipleSave();\n        } else {\n          reject({\n            status: 200,\n            message: 'Nothing to save'\n          });\n        }\n      });\n    }\n\n    /**\n      * @method exists\n      * @param {String} title\n      * @desc asserts if an the specified hashtag title exists\n      * @return {Promise} a promise object\n    */\n\n  }, {\n    key: 'exists',\n    value: function exists(title) {\n      var _this8 = this;\n\n      return new Promise(function (fulfill, reject) {\n        _this8.HashTagModel.findOne({ title: title }).then(function (result) {\n          if (result !== null) {\n            fulfill(result);\n          } else {\n            reject('');\n          }\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    }\n\n    /**\n      * @method remove\n      * @param {String} title\n      * @desc removes the hash tag from record\n      * @return {Promise} a promise object\n    */\n\n  }, {\n    key: 'remove',\n    value: function remove(title) {\n      var _this9 = this;\n\n      return new Promise(function (fulfill, reject) {\n        _this9.exists(title).then(function () {\n          _this9.HashTagModel.remove({ title: title }).then(function () {\n            fulfill({\n              status: 200,\n              message: 'Hastag deleted!'\n            });\n          }).catch(function () {\n            reject({\n              status: 500,\n              message: 'Unable to delete hashtag!'\n            });\n          });\n        }).catch(function () {\n          reject({\n            status: 404,\n            message: 'Unable to delete, hashtag not found!'\n          });\n        });\n      });\n    }\n  }]);\n\n  return HashTagModel;\n}();\n\nexports.default = HashTagModel;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hcHAvbW9kZWxzL0hhc2hUYWdNb2RlbC5qcz85NGI4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5pbXBvcnQgSGFzaFRhZ1NjaGVtYSBmcm9tICcuLi9zY2hlbWEvSGFzaFRhZ1NjaGVtYSc7XG5cbmNsYXNzIEhhc2hUYWdNb2RlbCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuSGFzaFRhZ01vZGVsID0gbW9uZ29vc2UubW9kZWwoJ2hhc2h0YWdzJywgSGFzaFRhZ1NjaGVtYSk7XG4gIH1cblxuICAvKipcbiAgICAqIEBtZXRob2Qgc2VhcmNoXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGVcbiAgICAqIEBkZXNjIHByb3ZpZGVzIGFiaWxpdHkgdG8gc2VhcmNoIGZvciBoYXNodGFncyB0aGF0IGhhdmUgYmVlbiBzYXZlZFxuICAgICogQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIG9iamVjdFxuICAqL1xuICBzZWFyY2godGl0bGUpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5IYXNoVGFnTW9kZWwuZmluZE9uZSh7XG4gICAgICAgIHRpdGxlOiB7ICRyZWdleDogbmV3IFJlZ0V4cCh0aXRsZSwgJ2lnJykgfVxuICAgICAgfSlcbiAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgZnVsZmlsbCh7XG4gICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgZGF0YTogcmVzdWx0XG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgICBlcnJvclxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAgKiBAbWV0aG9kIHNlYXJjaFN1Z2dlc3RcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZVxuICAgICogQGRlc2MgcHJvdmlkZXMgYWJpbGl0eSB0byBzdWdnZXN0IHNlYXJjaCBmb3IgaGFzaHRhZ3NcbiAgICAqIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSBvYmplY3RcbiAgKi9cbiAgc2VhcmNoU3VnZ2VzdCh0aXRsZSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLkhhc2hUYWdNb2RlbC5maW5kKHtcbiAgICAgICAgdGl0bGU6IHsgJHJlZ2V4OiBuZXcgUmVnRXhwKHRpdGxlLCAnaWcnKSB9XG4gICAgICB9KVxuICAgICAgLnNlbGVjdCgndGl0bGUnKVxuICAgICAgLmxpbWl0KDUpXG4gICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgIGlmIChyZXN1bHQubGVuZ3RoKSB7XG4gICAgICAgICAgZnVsZmlsbCh7XG4gICAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICAgIGRhdGE6IHJlc3VsdFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgICBzdGF0dXM6IDQwNCxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdObyByZXN1bHQgZm91bmQhJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICByZWplY3Qoe1xuICAgICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICAgIGVycm9yXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICAqIEBtZXRob2QgZGVsZVBvc3RcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZVxuICAgICogQHBhcmFtIHtTdHJpbmd9IHBvc3RfaWRcbiAgICAqIEBkZXNjIGFsbG93cyB5b3UgdG8gcmVtb3ZlIGEgcG9zdElkIGFzc29jaWF0ZWQgdG8gdGhlIHNwZWNpZmllZCBoYXNodGFnXG4gICAgKiBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2Ugb2JqZWN0XG4gICovXG4gIGRlbGV0ZVBvc3QodGl0bGUsIHBvc3RfaWQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5IYXNoVGFnTW9kZWwuZmluZE9uZSh7IHRpdGxlIH0pXG4gICAgICAudGhlbigoaGFzaHRhZykgPT4ge1xuICAgICAgICBpZiAoaGFzaHRhZykge1xuICAgICAgICAgIGNvbnN0IHBvc3RfaWRzID0gaGFzaHRhZy5wb3N0X2lkcztcbiAgICAgICAgICBjb25zdCBwb3MgPSBwb3N0X2lkcy5pbmRleE9mKHBvc3RfaWQpO1xuXG4gICAgICAgICAgaWYgKHBvcyA+PSAwKSB7XG4gICAgICAgICAgICBwb3N0X2lkcy5zcGxpY2UocG9zLCAxKTsgLy8gZGVsZXRlIHRoZSBwb3N0IGlkIGZyb20gYXJyYXlcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsX3Bvc3RzID0gcG9zdF9pZHMubGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy5IYXNoVGFnTW9kZWwudXBkYXRlKHsgdGl0bGUgfSwgeyBwb3N0X2lkcywgdG90YWxfcG9zdHMgfSlcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgZnVsZmlsbCh7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ2hhc2h0YWcgZGV0YWlscyB1cGRhdGVkISdcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICAgICAgICAgIGVycm9yXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZ1bGZpbGwoe1xuICAgICAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICAgICAgbWVzc2FnZTogJ0hhc2h0YWdzIGFuZCBwb3N0IHdlcmUgbm90IGFzc29jaWF0ZWQhJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgICBzdGF0dXM6IDQwNCxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdVbmFibGUgdG8gZGVsZXRlLCBoYXNodGFnIG5vdCBmb3VuZCEnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgICAgZXJyb3JcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgICogQG1ldGhvZCBkZWxldGVNdWx0aXBsZVxuICAgICogQHBhcmFtIHtBcnJheX0gaGFzaHRhZ3NcbiAgICAqIEBwYXJhbSB7QXJyYXl9IHBvc3RfaWRzXG4gICAgKiBAZGVzYyBkZWFzb2NpYXRlIHNwZWNpZmllZCBoYXNodGFncyBmcm9tIHRoZSBzcGVjaWZpZWQgcG9zdCBpZHNcbiAgICAqIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSBvYmplY3RcbiAgKi9cbiAgZGVsZXRlTXVsdGlwbGUoaGFzaHRhZ3MsIHBvc3RfaWRzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgIGhhc2h0YWdzID0gQXJyYXkuZnJvbShuZXcgU2V0KGhhc2h0YWdzKSk7IC8vIHJlbW92ZSBkdXBsaWNhdGUgaGFzdGFnc1xuXG4gICAgICBsZXQgY3Vyc29yID0gcG9zdF9pZHMubGVuZ3RoIC0gMTtcbiAgICAgIGxldCBjdXJzb3IyID0gaGFzaHRhZ3MubGVuZ3RoIC0gMTtcbiAgICAgIGNvbnN0IGQgPSAoKSA9PiB7XG4gICAgICAgIGxldCBjID0gKCkgPT4ge1xuICAgICAgICAgIHRoaXMuZGVsZXRlUG9zdChoYXNodGFnc1tjdXJzb3IyXSwgcG9zdF9pZHNbY3Vyc29yXSlcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjdXJzb3IyIC09IDE7XG4gICAgICAgICAgICBpZiAoY3Vyc29yMiA+PSAwKSB7XG4gICAgICAgICAgICAgIGMoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3Vyc29yID4gMCkge1xuICAgICAgICAgICAgICBjdXJzb3IgLT0gMTtcbiAgICAgICAgICAgICAgY3Vyc29yMiA9IGhhc2h0YWdzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICAgIGQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGZ1bGZpbGwoe1xuICAgICAgICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdEZWxldGVkIG11bHRpcGxlIGhhc2h0YWdzIGZyb20gcG9zdHMnXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgYygpO1xuICAgICAgfTtcbiAgICAgIGQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgICogQG1ldGhvZCB2aWV3XG4gICAgKiBAcGFyYW0ge09iamVjdH0gcmVxXG4gICAgKiBAZGVzYyBhbGxvd3MgeW91IHRvIHZpZXcgYW5kIHNvcnQgYWxsIGhhc2h0YWdzIGluIHRoZSBzeXN0ZW1cbiAgICAqIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSBvYmplY3RcbiAgKi9cbiAgdmlldyhyZXEpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3Qgb3JkZXJCeSA9IHJlcS5xdWVyeS5vcmRlcl9ieTtcbiAgICAgIGNvbnN0IG9yZGVyID0gcmVxLnF1ZXJ5Lm9yZGVyO1xuXG4gICAgICBzd2l0Y2gob3JkZXJCeSkge1xuICAgICAgICBjYXNlICdwb3N0cyc6XG4gICAgICAgICAgbGV0IGRpcmVjdGlvbiA9IChvcmRlciA9PT0gJ2FzYycpID8gLTEgOiAxO1xuICAgICAgICAgIHRoaXMuSGFzaFRhZ01vZGVsLmZpbmQoKVxuICAgICAgICAgIC5zb3J0KHsgdG90YWxfcG9zdHM6IGRpcmVjdGlvbiB9KVxuICAgICAgICAgIC50aGVuKChoYXNodGFncykgPT4ge1xuICAgICAgICAgICAgZnVsZmlsbCh7XG4gICAgICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgICAgICBtZXNzYWdlOiAnSGFzdGFncyBsaXN0ZWQhJyxcbiAgICAgICAgICAgICAgZGF0YTogaGFzaHRhZ3NcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHRoaXMuSGFzaFRhZ01vZGVsLmZpbmQoKVxuICAgICAgICAgIC50aGVuKChoYXNodGFncykgPT4ge1xuICAgICAgICAgICAgZnVsZmlsbCh7XG4gICAgICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgICAgICBtZXNzYWdlOiAnSGFzdGFncyBsaXN0ZWQhJyxcbiAgICAgICAgICAgICAgZGF0YTogaGFzaHRhZ3NcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICBtZXNzYWdlOiAnVW5hYmxlIHRvIGxpc3QgaGFzaHRhZ3MhJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgICogQG1ldGhvZCBzYXZlXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGVcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICAgICogQGRlc2MgYXNzb2NpYXRlIGEgcG9zdCBpZCB0byB0aGUgc3BlY2lmaWVkIGhhc2h0YWdcbiAgICBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2Ugb2JqZWN0XG4gICovXG4gIHNhdmUodGl0bGUsIGlkKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuZXhpc3RzKHRpdGxlKVxuICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgY29uc3QgaGFzaHRhZyA9IHtcbiAgICAgICAgICB0aXRsZSxcbiAgICAgICAgICBwb3N0X2lkczogW2lkXSxcbiAgICAgICAgICB0b3RhbF9wb3N0czogMVxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBuZXdIYXNoVGFnID0gbmV3IHRoaXMuSGFzaFRhZ01vZGVsKGhhc2h0YWcpO1xuICAgICAgICBuZXdIYXNoVGFnLnNhdmUoKHRhZykgPT4ge1xuICAgICAgICAgIGZ1bGZpbGwoe1xuICAgICAgICAgICAgc3RhdHVzOiAyMDEsXG4gICAgICAgICAgICBtZXNzYWdlOiAnSGFzaHRhZyBzYXZlZCcsXG4gICAgICAgICAgICBkYXRhOiB0YWdcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgICAgIGVycm9yXG4gICAgICAgICAgfSlcbiAgICAgICAgfSk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKHRhZykgPT4ge1xuICAgICAgICBjb25zdCBwb3N0X2lkcyA9IHRhZy5wb3N0X2lkcztcbiAgICAgICAgaWYocG9zdF9pZHMuaW5kZXhPZihpZCkgPCAwKSB7XG4gICAgICAgICAgcG9zdF9pZHMucHVzaChpZCk7XG4gICAgICAgICAgdGhpcy5IYXNoVGFnTW9kZWwudXBkYXRlKHt0aXRsZX0sIHtcbiAgICAgICAgICAgIHBvc3RfaWRzLCBcbiAgICAgICAgICAgIHRvdGFsX3Bvc3RzOiBwb3N0X2lkcy5sZW5ndGhcbiAgICAgICAgICB9KVxuICAgICAgICAgIC50aGVuKChvbGRUYWcpID0+IHtcbiAgICAgICAgICAgIGZ1bGZpbGwoe1xuICAgICAgICAgICAgICBzdGF0dXM6IDIwMSxcbiAgICAgICAgICAgICAgbWVzc2FnZTogJ0hhc2h0YWcgc2F2ZWQnLFxuICAgICAgICAgICAgICBkYXRhOiBPYmplY3QuYXNzaWduKG9sZFRhZywgeyBwb3N0X2lkcyB9KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICAgICAgICBlcnJvclxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmdWxmaWxsKHtcbiAgICAgICAgICAgIHN0YXR1czogMjAxLFxuICAgICAgICAgICAgbWVzc2FnZTogJ0FscmVhZHkgc2F2ZWQgaGFzaHRhZyEnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pOyAgICAgIFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAgKiBAbWV0aG9kIHNhdmVNdWx0aXBsZVxuICAgICogQHBhcmFtIHtPYmplY3R9IGhhc2h0YWdzXG4gICAgKiBAZGVzYyBhdXRvbWF0aWNhbGx5IGNhbGxzIHRoZSBzYXZlIG1ldGhvZCB0byBjYWxjdWxhdGUgdG90YWwgcG9zdCB3aGlsZVxuICAgICogc2F2aW5nIG5ldyBoYXN0YWdzXG4gICAgKiBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2Ugb2JqZWN0XG4gICovXG4gIHNhdmVNdWx0aXBsZShoYXNodGFncykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XG4gICAgICBpZiAoaGFzaHRhZ3MubGVuZ3RoKSB7XG4gICAgICAgIGxldCBjdXJzb3IgPSBoYXNodGFncy5sZW5ndGggLSAxO1xuICAgICAgICBjb25zdCBtdWx0aXBsZVNhdmUgPSAoKSA9PiB7XG4gICAgICAgICAgdGhpcy5zYXZlKGhhc2h0YWdzW2N1cnNvcl0udGl0bGUsIGhhc2h0YWdzW2N1cnNvcl0ucG9zdF9pZClcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBjdXJzb3IgLT0gMTtcbiAgICAgICAgICAgIGlmIChjdXJzb3IgPT09IC0xKSB7XG4gICAgICAgICAgICAgIGZ1bGZpbGwoe1xuICAgICAgICAgICAgICAgIHN0YXR1czogMjAxLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdTYXZlZCBtdWx0aXBsZSBoYXNodGFncyEnXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbXVsdGlwbGVTYXZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBtdWx0aXBsZVNhdmUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgbWVzc2FnZTogJ05vdGhpbmcgdG8gc2F2ZSdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICAqIEBtZXRob2QgZXhpc3RzXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gdGl0bGVcbiAgICAqIEBkZXNjIGFzc2VydHMgaWYgYW4gdGhlIHNwZWNpZmllZCBoYXNodGFnIHRpdGxlIGV4aXN0c1xuICAgICogQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIG9iamVjdFxuICAqL1xuICBleGlzdHModGl0bGUpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5IYXNoVGFnTW9kZWwuZmluZE9uZSh7dGl0bGV9KVxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICBpZihyZXN1bHQgIT09IG51bGwpIHtcbiAgICAgICAgICAgZnVsZmlsbChyZXN1bHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlamVjdCgnJyk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgICogQG1ldGhvZCByZW1vdmVcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZVxuICAgICogQGRlc2MgcmVtb3ZlcyB0aGUgaGFzaCB0YWcgZnJvbSByZWNvcmRcbiAgICAqIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSBvYmplY3RcbiAgKi9cbiAgcmVtb3ZlKHRpdGxlKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuZXhpc3RzKHRpdGxlKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICB0aGlzLkhhc2hUYWdNb2RlbC5yZW1vdmUoeyB0aXRsZSB9KVxuICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgZnVsZmlsbCh7XG4gICAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdIYXN0YWcgZGVsZXRlZCEnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICAgICAgbWVzc2FnZTogJ1VuYWJsZSB0byBkZWxldGUgaGFzaHRhZyEnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgc3RhdHVzOiA0MDQsXG4gICAgICAgICAgbWVzc2FnZTogJ1VuYWJsZSB0byBkZWxldGUsIGhhc2h0YWcgbm90IGZvdW5kISdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IEhhc2hUYWdNb2RlbDtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBhcHAvbW9kZWxzL0hhc2hUYWdNb2RlbC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7O0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OztBQU1BO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQURBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBTUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBREE7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUFPQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUFPQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFNQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQWxDQTtBQW9DQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OztBQU9BO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUVBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUFPQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFNQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7QUFNQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7Ozs7OztBQUlBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///7\n");

/***/ }),
/* 8 */
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"dotenv\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9leHRlcm5hbCBcImRvdGVudlwiPzM4ODAiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZG90ZW52XCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiZG90ZW52XCJcbi8vIG1vZHVsZSBpZCA9IDhcbi8vIG1vZHVsZSBjaHVua3MgPSAwIl0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///8\n");

/***/ }),
/* 9 */
/*!************************************!*\
  !*** ./app/helpers/MediaHelper.js ***!
  \************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _multer = __webpack_require__(/*! multer */ 18);\n\nvar _multer2 = _interopRequireDefault(_multer);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar MediaHelper = function () {\n  function MediaHelper() {\n    _classCallCheck(this, MediaHelper);\n  }\n\n  _createClass(MediaHelper, null, [{\n    key: 'getExtension',\n\n\n    /**\n      * @method getExtension\n      * @param {String} filename\n      * @desc gets the file extension from a filename\n      * @return {String} the actual extension of the file\n    */\n    value: function getExtension(filename) {\n      return str.substr(str.lastIndexOf('.') + 1);\n    }\n\n    /**\n      * @method isAllowedFile\n      * @param {String} filename\n      * @desc checks if the file extension is allowed\n      * @return {Boolean} return true if the file is allowed\n    */\n\n  }, {\n    key: 'isAllowedFile',\n    value: function isAllowedFile(mimetype) {\n      var img = ['jpg', 'jpeg', 'png'];\n      var videos = ['mp4', 'mov', 'avi', '3gp', '3gpp', 'webm', 'mpeg'];\n      var allowedFiles = img.concat(videos);\n      var fileExtension = mimetype.split('/')[1];\n\n      return allowedFiles.indexOf(fileExtension) >= 0;\n    }\n  }, {\n    key: 'setupUploader',\n    value: function setupUploader() {\n      var dest = 'uploads/';\n      var uploader = (0, _multer2.default)({ dest: dest, fileFilter: function fileFilter(req, file, cb) {\n          var mimetype = file.mimetype;\n          if (MediaHelper.isAllowedFile(mimetype)) {\n            cb(null, true);\n          } else {\n            cb(null, false);\n          }\n        } });\n      return uploader;\n    }\n  }]);\n\n  return MediaHelper;\n}();\n\nexports.default = MediaHelper;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiOS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hcHAvaGVscGVycy9NZWRpYUhlbHBlci5qcz9iMjE2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtdWx0ZXIgZnJvbSAnbXVsdGVyJztcblxuY2xhc3MgTWVkaWFIZWxwZXIge1xuXG4gIC8qKlxuICAgICogQG1ldGhvZCBnZXRFeHRlbnNpb25cbiAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlbmFtZVxuICAgICogQGRlc2MgZ2V0cyB0aGUgZmlsZSBleHRlbnNpb24gZnJvbSBhIGZpbGVuYW1lXG4gICAgKiBAcmV0dXJuIHtTdHJpbmd9IHRoZSBhY3R1YWwgZXh0ZW5zaW9uIG9mIHRoZSBmaWxlXG4gICovXG4gIHN0YXRpYyBnZXRFeHRlbnNpb24oZmlsZW5hbWUpIHtcbiAgICByZXR1cm4gc3RyLnN1YnN0cihzdHIubGFzdEluZGV4T2YoJy4nKSArIDEpO1xuICB9XG5cbiAgLyoqXG4gICAgKiBAbWV0aG9kIGlzQWxsb3dlZEZpbGVcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSBmaWxlbmFtZVxuICAgICogQGRlc2MgY2hlY2tzIGlmIHRoZSBmaWxlIGV4dGVuc2lvbiBpcyBhbGxvd2VkXG4gICAgKiBAcmV0dXJuIHtCb29sZWFufSByZXR1cm4gdHJ1ZSBpZiB0aGUgZmlsZSBpcyBhbGxvd2VkXG4gICovXG4gIHN0YXRpYyBpc0FsbG93ZWRGaWxlKG1pbWV0eXBlKSB7XG4gICAgY29uc3QgaW1nID0gWydqcGcnLCAnanBlZycsICdwbmcnXTtcbiAgICBjb25zdCB2aWRlb3MgPSBbJ21wNCcsICdtb3YnLCAnYXZpJywgJzNncCcsICczZ3BwJywgJ3dlYm0nLCAnbXBlZyddO1xuICAgIGNvbnN0IGFsbG93ZWRGaWxlcyA9IGltZy5jb25jYXQodmlkZW9zKTtcbiAgICBjb25zdCBmaWxlRXh0ZW5zaW9uID0gIG1pbWV0eXBlLnNwbGl0KCcvJylbMV07XG5cbiAgICByZXR1cm4gKGFsbG93ZWRGaWxlcy5pbmRleE9mKGZpbGVFeHRlbnNpb24pID49IDApO1xuICB9XG5cbiAgc3RhdGljIHNldHVwVXBsb2FkZXIoKSB7XG4gICAgY29uc3QgZGVzdCA9ICd1cGxvYWRzLyc7XG4gICAgY29uc3QgdXBsb2FkZXIgPSBtdWx0ZXIoeyBkZXN0LCBmaWxlRmlsdGVyOiBmdW5jdGlvbihyZXEsIGZpbGUsIGNiKSB7XG4gICAgICBjb25zdCBtaW1ldHlwZSA9IGZpbGUubWltZXR5cGU7XG4gICAgICBpZihNZWRpYUhlbHBlci5pc0FsbG93ZWRGaWxlKG1pbWV0eXBlKSkge1xuICAgICAgICBjYihudWxsLCB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNiKG51bGwsIGZhbHNlKTtcbiAgICAgIH1cbiAgICB9fSk7XG4gICAgcmV0dXJuIHVwbG9hZGVyO1xuICB9XG59XG5cblxuZXhwb3J0IGRlZmF1bHQgTWVkaWFIZWxwZXI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYXBwL2hlbHBlcnMvTWVkaWFIZWxwZXIuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7Ozs7OztBQUNBOzs7Ozs7Ozs7QUFFQTs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFJQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///9\n");

/***/ }),
/* 10 */
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"fs\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJmc1wiPzJlMDkiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiZnNcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJmc1wiXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///10\n");

/***/ }),
/* 11 */
/*!*****************************!*\
  !*** external "cloudinary" ***!
  \*****************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"cloudinary\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJjbG91ZGluYXJ5XCI/MWVlNCJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJjbG91ZGluYXJ5XCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwiY2xvdWRpbmFyeVwiXG4vLyBtb2R1bGUgaWQgPSAxMVxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///11\n");

/***/ }),
/* 12 */
/*!**********************************!*\
  !*** ./app/models/PostsModel.js ***!
  \**********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _mongoose = __webpack_require__(/*! mongoose */ 0);\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _cloudinary = __webpack_require__(/*! cloudinary */ 11);\n\nvar _cloudinary2 = _interopRequireDefault(_cloudinary);\n\nvar _fs = __webpack_require__(/*! fs */ 10);\n\nvar _fs2 = _interopRequireDefault(_fs);\n\nvar _PostsSchema = __webpack_require__(/*! ../schema/PostsSchema */ 25);\n\nvar _PostsSchema2 = _interopRequireDefault(_PostsSchema);\n\nvar _UsersModel = __webpack_require__(/*! ../models/UsersModel */ 5);\n\nvar _UsersModel2 = _interopRequireDefault(_UsersModel);\n\nvar _HashTagHelper = __webpack_require__(/*! ../helpers/HashTagHelper */ 26);\n\nvar _HashTagHelper2 = _interopRequireDefault(_HashTagHelper);\n\nvar _HashTagModel = __webpack_require__(/*! ../models/HashTagModel */ 7);\n\nvar _HashTagModel2 = _interopRequireDefault(_HashTagModel);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PostsModel = function () {\n  function PostsModel() {\n    _classCallCheck(this, PostsModel);\n\n    this.PostsModel = _mongoose2.default.model('posts', _PostsSchema2.default);\n    this.UsersModel = new _UsersModel2.default();\n    this.HashTagModel = new _HashTagModel2.default();\n  }\n\n  /**\n    * @method create\n    * @param {Object} req\n    * @param {Object} res\n    * @desc creates a new post for a user and uploads the user's media\n    * @return {Promise} a promise object\n    *\n  */\n\n\n  _createClass(PostsModel, [{\n    key: 'create',\n    value: function create(req, res) {\n      var _this = this;\n\n      return new Promise(function (fulfill, reject) {\n        var media = req.files;\n        var caption = req.body.caption || undefined;\n        var description = req.body.description || undefined;\n        var uid = res.locals.user.id;\n        var hashCash = req.body.has_cash && req.body.has_cash === 'true';\n\n        var newPost = { has_cash: hashCash, uid: uid };\n        var errors = {};\n\n        if (caption) {\n          if (caption.trim().length < 1) {\n            errors.caption = 'Caption is empty';\n          } else {\n            newPost.caption = caption.trim();\n          }\n        }\n\n        if (description) {\n          if (description.trim().length < 1) {\n            errors.description = 'description is empty';\n          } else {\n            newPost.description = description.trim();\n          }\n        }\n\n        if (!media) {\n          errors.media = 'Make a multipart post request to upload a media file';\n        } else {\n          newPost.media = [];\n        }\n\n        // a counter to ensure media have been uploaded before ending the request\n        var counter = 1;\n        if (Object.keys(errors).length < 1) {\n          media.forEach(function (file, index) {\n            var currentTime = new Date().getTime();\n            var newFileName = file.destination + uid + '.' + currentTime + '.jpg';\n            _fs2.default.renameSync(file.path, newFileName);\n            _cloudinary2.default.uploader.upload(newFileName, function (result) {\n              _fs2.default.unlinkSync(newFileName);\n              newPost.media.push({\n                url: result.secure_url,\n                width: result.width,\n                height: result.height,\n                format: result.format,\n                bytes: result.bytes\n              });\n              if (counter === media.length) {\n                var NewPost = new _this.PostsModel(newPost);\n                NewPost.save().then(function (savedPost) {\n                  var postContent = caption ? caption.trim() : '';\n                  postContent += description ? ' ' + description.trim() : '';\n                  var hashtagsInfos = [];\n                  var hashtags = _HashTagHelper2.default.getHashTag(postContent);\n\n                  hashtags.forEach(function (title) {\n                    hashtagsInfos.push({ title: title, post_id: savedPost._id });\n                  });\n                  _this.HashTagModel.saveMultiple(hashtagsInfos).then(function () {\n                    fulfill({\n                      status: 201,\n                      message: 'Post submitted!',\n                      data: newPost\n                    });\n                  }).catch(function () {\n                    reject({\n                      status: 400,\n                      message: 'Error unable to save hashtags!',\n                      data: errors\n                    });\n                  });\n                }).catch(function (errors) {\n                  reject({\n                    status: 400,\n                    message: 'Error saving post, you have an error in your post',\n                    data: errors\n                  });\n                });\n              }\n              counter += 1;\n            });\n          });\n        } else {\n          reject({\n            status: 400,\n            message: 'You have an error in your post',\n            data: errors\n          });\n        }\n      });\n    }\n\n    /**\n      * @method view\n      * @param {Object} req\n      * @param {Object} res\n      * @desc view posts\n      * @return {Promise} a promise object\n    */\n\n  }, {\n    key: 'view',\n    value: function view(req, res) {\n      var _this2 = this;\n\n      return new Promise(function (fulfill, reject) {\n        var postId = req.query.id || undefined;\n        var user = req.query.user || res.locals.user.username;\n        var page = req.query.page || undefined;\n        var limit = parseInt(req.query.limit) || 10;\n\n        if (postId) {\n          _this2.PostsModel.findById(postId).then(function (posts) {\n            fulfill({\n              status: 200,\n              message: 'All posts listed!',\n              data: posts\n            });\n          }).catch(function (error) {\n            reject({\n              status: 500,\n              error: error\n            });\n          });\n        } else {\n          var a = { query: { user: user } };\n          _this2.UsersModel.getUsers(a).then(function (response) {\n            var userId = response.data._id;\n            _this2.PostsModel.find({ uid: userId }).skip(page * limit).limit(limit).then(function (posts) {\n              fulfill({\n                status: 200,\n                message: 'All posts listed!',\n                data: posts\n              });\n            }).catch(function (error) {\n              reject({\n                status: 500,\n                error: error\n              });\n            });\n          });\n        }\n      });\n    }\n\n    /**\n      * @method update\n      * @param {Object} req\n      * @param {Object} res\n      * @desc update a post\n      * @return {Promise} a promise object\n    */\n\n  }, {\n    key: 'update',\n    value: function update(req, res) {\n      var _this3 = this;\n\n      return new Promise(function (fulfill, reject) {\n        var postId = req.body.id || req.query.id || undefined;\n        var uid = res.locals.user.id;\n        var caption = req.body.caption || undefined;\n        var description = req.body.description || undefined;\n        var hashCash = req.body.has_cash && req.body.has_cash === 'true';\n\n        var update = {};\n\n        if (caption) {\n          update.caption = caption.trim();\n        }\n\n        if (description) {\n          update.description = description.trim();\n        }\n\n        if (postId) {\n          _this3.PostsModel.findById(postId).then(function (post) {\n            if (uid === post.uid) {\n              if (!post.has_cash) {\n                update.has_cash = hashCash;\n              }\n\n              var oldPostContent = post.caption + ' ' + post.description;\n\n              var newPostContent = caption ? caption.trim() : '';\n              newPostContent += description ? ' ' + description.trim() : '';\n\n              var oldHashtags = _HashTagHelper2.default.getHashTag(oldPostContent);\n              var newHashtags = _HashTagHelper2.default.getHashTag(newPostContent);\n\n              var compare = _HashTagHelper2.default.compare(oldHashtags, newHashtags);\n\n              var newHashtagsInfos = [];\n              compare.newer.forEach(function (hashtag) {\n                newHashtagsInfos.push({\n                  title: hashtag,\n                  post_id: post._id\n                });\n              });\n              _this3.PostsModel.findByIdAndUpdate(postId, update).then(function () {\n                if (compare.obsolete.length) {\n                  _this3.HashTagModel.deleteMultiple(compare.obsolete, [post._id]).then(function () {\n                    if (compare.newer.length) {\n                      _this3.HashTagModel.saveMultiple(newHashtagsInfos).then(function () {\n                        fulfill({\n                          status: 200,\n                          message: 'Post updated',\n                          data: Object.assign(post, update)\n                        });\n                      }).catch(function (error) {\n                        reject(error);\n                      });\n                    }\n                  }).catch(function (error) {\n                    reject(error);\n                  });\n                } else if (compare.newer.length) {\n                  _this3.HashTagModel.saveMultiple(newHashtagsInfos).then(function () {\n                    fulfill({\n                      status: 200,\n                      message: 'Post updated',\n                      data: Object.assign(post, update)\n                    }).catch(function (error) {\n                      reject(error);\n                    });\n                  }).catch(function (error) {\n                    reject(error);\n                  });\n                } else {\n                  fulfill({\n                    status: 200,\n                    message: 'Post updated',\n                    data: Object.assign(post, update)\n                  });\n                }\n              }).catch(function (error) {\n                reject({\n                  status: 500,\n                  error: error\n                });\n              });\n            } else {\n              reject({\n                status: 403,\n                message: 'Permission denied!'\n              });\n            }\n          }).catch(function (error) {\n            reject({\n              status: 500,\n              message: 'Unable to find the post',\n              error: error\n            });\n          });\n        } else {\n          reject({\n            status: 400,\n            message: 'Unable to update, post id not provided!'\n          });\n        }\n      });\n    }\n\n    /**\n      * @method remove\n      * @param {Object} req\n      * @param {Object} res\n      * @desc remove a specific\n      * @return {Promise} a promise object\n    */\n\n  }, {\n    key: 'remove',\n    value: function remove(req, res) {\n      var _this4 = this;\n\n      return new Promise(function (fulfill, reject) {\n        var id = req.query.id;\n        var uid = res.locals.user.id;\n        _this4.PostsModel.findById(id).then(function (post) {\n          if (uid === post.uid) {\n            _this4.PostsModel.remove({ _id: id }).then(function () {\n              fulfill({\n                status: 200,\n                message: 'Post deleted!'\n              });\n            }).catch(function (error) {\n              reject({\n                status: 500,\n                error: error\n              });\n            });\n          } else {\n            reject({\n              status: 403,\n              message: 'Permission denied!'\n            });\n          }\n        }).catch(function (error) {\n          reject({\n            status: 500,\n            error: error\n          });\n        });\n      });\n    }\n\n    /**\n      * @method search\n      * @param {Object} req\n      * @param {String} hashtag\n      * @desc searches the Hastag collection and gets their postids and return\n      * the posts\n      * @return {Promise} a promise object\n    */\n\n  }, {\n    key: 'search',\n    value: function search(req, hashtag) {\n      var _this5 = this;\n\n      return new Promise(function (fulfill, reject) {\n        var limit = parseInt(req.query.limit, 10) || 5;\n        var page = parseInt(req.query.page, 10) || 0;\n\n        _this5.HashTagModel.search(hashtag).then(function (response) {\n          var hashtags = response.data;\n\n          if (hashtags) {\n            var postIds = hashtags.post_ids;\n            var pattern = { $or: [] };\n            postIds.forEach(function (postId) {\n              pattern.$or.push({ _id: postId });\n            });\n            _this5.PostsModel.find(pattern).skip(page * limit).limit(limit).then(function (result) {\n              if (result.length) {\n                fulfill({\n                  status: 200,\n                  data: result\n                });\n              } else {\n                reject({\n                  status: 404,\n                  message: 'No posts found!'\n                });\n              }\n            }).catch(function (error) {\n              reject(error);\n            });\n          } else {\n            reject({\n              status: 404,\n              message: 'No posts found!'\n            });\n          }\n        }).catch(function (error) {\n          reject({\n            status: 500,\n            message: 'Something went wrong',\n            error: error\n          });\n        });\n      });\n    }\n  }]);\n\n  return PostsModel;\n}();\n\nexports.default = PostsModel;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBwL21vZGVscy9Qb3N0c01vZGVsLmpzPzM2NzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCBjbG91ZGluYXJ5IGZyb20gJ2Nsb3VkaW5hcnknO1xuaW1wb3J0IGZzIGZyb20gJ2ZzJztcbmltcG9ydCBQb3N0c1NjaGVtYSBmcm9tICcuLi9zY2hlbWEvUG9zdHNTY2hlbWEnO1xuaW1wb3J0IFVzZXJzTW9kZWwgZnJvbSAnLi4vbW9kZWxzL1VzZXJzTW9kZWwnO1xuaW1wb3J0IEhhc2hUYWdIZWxwZXIgZnJvbSAnLi4vaGVscGVycy9IYXNoVGFnSGVscGVyJztcbmltcG9ydCBIYXNoVGFnTW9kZWwgZnJvbSAnLi4vbW9kZWxzL0hhc2hUYWdNb2RlbCc7XG5cbmNsYXNzIFBvc3RzTW9kZWwge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLlBvc3RzTW9kZWwgPSBtb25nb29zZS5tb2RlbCgncG9zdHMnLCBQb3N0c1NjaGVtYSk7XG4gICAgdGhpcy5Vc2Vyc01vZGVsID0gbmV3IFVzZXJzTW9kZWwoKTtcbiAgICB0aGlzLkhhc2hUYWdNb2RlbCA9IG5ldyBIYXNoVGFnTW9kZWwoKTtcbiAgfVxuXG4gIC8qKlxuICAgICogQG1ldGhvZCBjcmVhdGVcbiAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXFcbiAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXNcbiAgICAqIEBkZXNjIGNyZWF0ZXMgYSBuZXcgcG9zdCBmb3IgYSB1c2VyIGFuZCB1cGxvYWRzIHRoZSB1c2VyJ3MgbWVkaWFcbiAgICAqIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSBvYmplY3RcbiAgICAqXG4gICovXG4gIGNyZWF0ZShyZXEsIHJlcykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBtZWRpYSA9IHJlcS5maWxlcztcbiAgICAgIGNvbnN0IGNhcHRpb24gPSByZXEuYm9keS5jYXB0aW9uIHx8IHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gcmVxLmJvZHkuZGVzY3JpcHRpb24gfHwgdW5kZWZpbmVkO1xuICAgICAgY29uc3QgdWlkID0gcmVzLmxvY2Fscy51c2VyLmlkO1xuICAgICAgY29uc3QgaGFzaENhc2ggPSAocmVxLmJvZHkuaGFzX2Nhc2ggJiYgcmVxLmJvZHkuaGFzX2Nhc2ggPT09ICd0cnVlJyk7XG5cbiAgICAgIGNvbnN0IG5ld1Bvc3QgPSB7IGhhc19jYXNoOiBoYXNoQ2FzaCwgdWlkIH07XG4gICAgICBjb25zdCBlcnJvcnMgPSB7fTtcblxuICAgICAgaWYgKGNhcHRpb24pIHtcbiAgICAgICAgaWYgKGNhcHRpb24udHJpbSgpLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICBlcnJvcnMuY2FwdGlvbiA9ICdDYXB0aW9uIGlzIGVtcHR5JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdQb3N0LmNhcHRpb24gPSBjYXB0aW9uLnRyaW0oKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZGVzY3JpcHRpb24pIHtcbiAgICAgICAgaWYgKGRlc2NyaXB0aW9uLnRyaW0oKS5sZW5ndGggPCAxKSB7XG4gICAgICAgICAgZXJyb3JzLmRlc2NyaXB0aW9uID0gJ2Rlc2NyaXB0aW9uIGlzIGVtcHR5JztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXdQb3N0LmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb24udHJpbSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghbWVkaWEpIHtcbiAgICAgICAgZXJyb3JzLm1lZGlhID0gJ01ha2UgYSBtdWx0aXBhcnQgcG9zdCByZXF1ZXN0IHRvIHVwbG9hZCBhIG1lZGlhIGZpbGUnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV3UG9zdC5tZWRpYSA9IFtdO1xuICAgICAgfVxuXG4gICAgICAvLyBhIGNvdW50ZXIgdG8gZW5zdXJlIG1lZGlhIGhhdmUgYmVlbiB1cGxvYWRlZCBiZWZvcmUgZW5kaW5nIHRoZSByZXF1ZXN0XG4gICAgICBsZXQgY291bnRlciA9IDE7XG4gICAgICBpZiAoT2JqZWN0LmtleXMoZXJyb3JzKS5sZW5ndGggPCAxKSB7XG4gICAgICAgIG1lZGlhLmZvckVhY2goKGZpbGUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgbGV0IGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgICAgbGV0IG5ld0ZpbGVOYW1lID0gYCR7ZmlsZS5kZXN0aW5hdGlvbiArIHVpZCArICcuJyArIGN1cnJlbnRUaW1lfS5qcGdgO1xuICAgICAgICAgIGZzLnJlbmFtZVN5bmMoZmlsZS5wYXRoLCBuZXdGaWxlTmFtZSk7XG4gICAgICAgICAgY2xvdWRpbmFyeS51cGxvYWRlci51cGxvYWQobmV3RmlsZU5hbWUsIChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgIGZzLnVubGlua1N5bmMobmV3RmlsZU5hbWUpO1xuICAgICAgICAgICAgbmV3UG9zdC5tZWRpYS5wdXNoKHtcbiAgICAgICAgICAgICAgdXJsOiByZXN1bHQuc2VjdXJlX3VybCxcbiAgICAgICAgICAgICAgd2lkdGg6IHJlc3VsdC53aWR0aCxcbiAgICAgICAgICAgICAgaGVpZ2h0OiByZXN1bHQuaGVpZ2h0LFxuICAgICAgICAgICAgICBmb3JtYXQ6IHJlc3VsdC5mb3JtYXQsXG4gICAgICAgICAgICAgIGJ5dGVzOiByZXN1bHQuYnl0ZXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNvdW50ZXIgPT09IG1lZGlhLmxlbmd0aCkge1xuICAgICAgICAgICAgICBjb25zdCBOZXdQb3N0ID0gbmV3IHRoaXMuUG9zdHNNb2RlbChuZXdQb3N0KTtcbiAgICAgICAgICAgICAgTmV3UG9zdC5zYXZlKClcbiAgICAgICAgICAgICAgLnRoZW4oKHNhdmVkUG9zdCkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBwb3N0Q29udGVudCA9IChjYXB0aW9uKSA/IGNhcHRpb24udHJpbSgpIDogJyc7IFxuICAgICAgICAgICAgICAgIHBvc3RDb250ZW50ICs9IChkZXNjcmlwdGlvbikgPyAnICcrIGRlc2NyaXB0aW9uLnRyaW0oKSA6ICcnO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhc2h0YWdzSW5mb3MgPSBbXTtcbiAgICAgICAgICAgICAgICBjb25zdCBoYXNodGFncyA9IEhhc2hUYWdIZWxwZXIuZ2V0SGFzaFRhZyhwb3N0Q29udGVudCk7XG5cbiAgICAgICAgICAgICAgICBoYXNodGFncy5mb3JFYWNoKCh0aXRsZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgaGFzaHRhZ3NJbmZvcy5wdXNoKHsgdGl0bGUsIHBvc3RfaWQ6IHNhdmVkUG9zdC5faWQgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5IYXNoVGFnTW9kZWwuc2F2ZU11bHRpcGxlKGhhc2h0YWdzSW5mb3MpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgZnVsZmlsbCh7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogMjAxLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUG9zdCBzdWJtaXR0ZWQhJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogbmV3UG9zdFxuICAgICAgICAgICAgICAgICAgfSk7IFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogNDAwLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3IgdW5hYmxlIHRvIHNhdmUgaGFzaHRhZ3MhJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZXJyb3JzXG4gICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcnMpID0+IHtcbiAgICAgICAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnRXJyb3Igc2F2aW5nIHBvc3QsIHlvdSBoYXZlIGFuIGVycm9yIGluIHlvdXIgcG9zdCcsXG4gICAgICAgICAgICAgICAgICBkYXRhOiBlcnJvcnNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb3VudGVyICs9IDE7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgICBtZXNzYWdlOiAnWW91IGhhdmUgYW4gZXJyb3IgaW4geW91ciBwb3N0JyxcbiAgICAgICAgICBkYXRhOiBlcnJvcnNcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICAqIEBtZXRob2Qgdmlld1xuICAgICogQHBhcmFtIHtPYmplY3R9IHJlcVxuICAgICogQHBhcmFtIHtPYmplY3R9IHJlc1xuICAgICogQGRlc2MgdmlldyBwb3N0c1xuICAgICogQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIG9iamVjdFxuICAqL1xuICB2aWV3KHJlcSwgcmVzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHBvc3RJZCA9IHJlcS5xdWVyeS5pZCB8fCB1bmRlZmluZWQ7XG4gICAgICBjb25zdCB1c2VyID0gcmVxLnF1ZXJ5LnVzZXIgfHwgcmVzLmxvY2Fscy51c2VyLnVzZXJuYW1lO1xuICAgICAgY29uc3QgcGFnZSA9IHJlcS5xdWVyeS5wYWdlIHx8IHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IGxpbWl0ID0gcGFyc2VJbnQocmVxLnF1ZXJ5LmxpbWl0KSB8fCAxMDtcblxuICAgICAgaWYocG9zdElkKSB7XG4gICAgICAgIHRoaXMuUG9zdHNNb2RlbC5maW5kQnlJZChwb3N0SWQpXG4gICAgICAgIC50aGVuKChwb3N0cykgPT4ge1xuICAgICAgICAgIGZ1bGZpbGwoe1xuICAgICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgICBtZXNzYWdlOiAnQWxsIHBvc3RzIGxpc3RlZCEnLFxuICAgICAgICAgICAgZGF0YTogcG9zdHNcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgICAgIGVycm9yXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgYSA9IHsgcXVlcnk6IHsgdXNlciB9IH07XG4gICAgICAgIHRoaXMuVXNlcnNNb2RlbC5nZXRVc2VycyhhKVxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICBjb25zdCB1c2VySWQgPSByZXNwb25zZS5kYXRhLl9pZDtcbiAgICAgICAgICB0aGlzLlBvc3RzTW9kZWwuZmluZCh7IHVpZDogdXNlcklkIH0pXG4gICAgICAgICAgLnNraXAocGFnZSAqIGxpbWl0KVxuICAgICAgICAgIC5saW1pdChsaW1pdClcbiAgICAgICAgICAudGhlbigocG9zdHMpID0+IHtcbiAgICAgICAgICAgIGZ1bGZpbGwoe1xuICAgICAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICAgICAgbWVzc2FnZTogJ0FsbCBwb3N0cyBsaXN0ZWQhJyxcbiAgICAgICAgICAgICAgZGF0YTogcG9zdHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgICAgICAgIGVycm9yXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9KTsgICAgICAgICAgXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAgKiBAbWV0aG9kIHVwZGF0ZVxuICAgICogQHBhcmFtIHtPYmplY3R9IHJlcVxuICAgICogQHBhcmFtIHtPYmplY3R9IHJlc1xuICAgICogQGRlc2MgdXBkYXRlIGEgcG9zdFxuICAgICogQHJldHVybiB7UHJvbWlzZX0gYSBwcm9taXNlIG9iamVjdFxuICAqL1xuICB1cGRhdGUocmVxLCByZXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgcG9zdElkID0gKHJlcS5ib2R5LmlkIHx8IHJlcS5xdWVyeS5pZCkgfHwgdW5kZWZpbmVkO1xuICAgICAgY29uc3QgdWlkID0gcmVzLmxvY2Fscy51c2VyLmlkO1xuICAgICAgY29uc3QgY2FwdGlvbiA9IHJlcS5ib2R5LmNhcHRpb24gfHwgdW5kZWZpbmVkO1xuICAgICAgY29uc3QgZGVzY3JpcHRpb24gPSByZXEuYm9keS5kZXNjcmlwdGlvbiB8fCB1bmRlZmluZWQ7XG4gICAgICBjb25zdCBoYXNoQ2FzaCA9IChyZXEuYm9keS5oYXNfY2FzaCAmJiByZXEuYm9keS5oYXNfY2FzaCA9PT0gJ3RydWUnKTtcblxuICAgICAgY29uc3QgdXBkYXRlID0ge307XG5cbiAgICAgIGlmIChjYXB0aW9uKSB7XG4gICAgICAgIHVwZGF0ZS5jYXB0aW9uID0gY2FwdGlvbi50cmltKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChkZXNjcmlwdGlvbikge1xuICAgICAgICB1cGRhdGUuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbi50cmltKCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChwb3N0SWQpIHtcbiAgICAgICAgdGhpcy5Qb3N0c01vZGVsLmZpbmRCeUlkKHBvc3RJZClcbiAgICAgICAgLnRoZW4oKHBvc3QpID0+IHtcbiAgICAgICAgICBpZiAodWlkID09PSBwb3N0LnVpZCkge1xuICAgICAgICAgICAgaWYgKCFwb3N0Lmhhc19jYXNoKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZS5oYXNfY2FzaCA9IGhhc2hDYXNoO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBvbGRQb3N0Q29udGVudCA9IGAke3Bvc3QuY2FwdGlvbn0gJHtwb3N0LmRlc2NyaXB0aW9ufWA7XG5cbiAgICAgICAgICAgIGxldCBuZXdQb3N0Q29udGVudCA9IChjYXB0aW9uKSA/IGNhcHRpb24udHJpbSgpIDogJyc7XG4gICAgICAgICAgICBuZXdQb3N0Q29udGVudCArPSAoZGVzY3JpcHRpb24pID8gYCAke2Rlc2NyaXB0aW9uLnRyaW0oKX1gIDogJyc7XG5cbiAgICAgICAgICAgIGNvbnN0IG9sZEhhc2h0YWdzID0gSGFzaFRhZ0hlbHBlci5nZXRIYXNoVGFnKG9sZFBvc3RDb250ZW50KTtcbiAgICAgICAgICAgIGNvbnN0IG5ld0hhc2h0YWdzID0gSGFzaFRhZ0hlbHBlci5nZXRIYXNoVGFnKG5ld1Bvc3RDb250ZW50KTtcblxuICAgICAgICAgICAgY29uc3QgY29tcGFyZSA9IEhhc2hUYWdIZWxwZXIuY29tcGFyZShvbGRIYXNodGFncywgbmV3SGFzaHRhZ3MpO1xuXG4gICAgICAgICAgICBjb25zdCBuZXdIYXNodGFnc0luZm9zID0gW107XG4gICAgICAgICAgICBjb21wYXJlLm5ld2VyLmZvckVhY2goKGhhc2h0YWcpID0+IHtcbiAgICAgICAgICAgICAgbmV3SGFzaHRhZ3NJbmZvcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0aXRsZTogaGFzaHRhZyxcbiAgICAgICAgICAgICAgICBwb3N0X2lkOiBwb3N0Ll9pZFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5Qb3N0c01vZGVsLmZpbmRCeUlkQW5kVXBkYXRlKHBvc3RJZCwgdXBkYXRlKVxuICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoY29tcGFyZS5vYnNvbGV0ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLkhhc2hUYWdNb2RlbC5kZWxldGVNdWx0aXBsZShjb21wYXJlLm9ic29sZXRlLCBbcG9zdC5faWRdKVxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmIChjb21wYXJlLm5ld2VyLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkhhc2hUYWdNb2RlbC5zYXZlTXVsdGlwbGUobmV3SGFzaHRhZ3NJbmZvcylcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUG9zdCB1cGRhdGVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IE9iamVjdC5hc3NpZ24ocG9zdCwgdXBkYXRlKVxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKGNvbXBhcmUubmV3ZXIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5IYXNoVGFnTW9kZWwuc2F2ZU11bHRpcGxlKG5ld0hhc2h0YWdzSW5mb3MpXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgZnVsZmlsbCh7XG4gICAgICAgICAgICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUG9zdCB1cGRhdGVkJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogT2JqZWN0LmFzc2lnbihwb3N0LCB1cGRhdGUpXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZ1bGZpbGwoe1xuICAgICAgICAgICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnUG9zdCB1cGRhdGVkJyxcbiAgICAgICAgICAgICAgICAgIGRhdGE6IE9iamVjdC5hc3NpZ24ocG9zdCwgdXBkYXRlKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICAgICAgICAgIGVycm9yXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgICAgIHN0YXR1czogNDAzLFxuICAgICAgICAgICAgICBtZXNzYWdlOiAnUGVybWlzc2lvbiBkZW5pZWQhJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICAgICAgbWVzc2FnZTogJ1VuYWJsZSB0byBmaW5kIHRoZSBwb3N0JyxcbiAgICAgICAgICAgIGVycm9yXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgICBtZXNzYWdlOiAnVW5hYmxlIHRvIHVwZGF0ZSwgcG9zdCBpZCBub3QgcHJvdmlkZWQhJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgICogQG1ldGhvZCByZW1vdmVcbiAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXFcbiAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXNcbiAgICAqIEBkZXNjIHJlbW92ZSBhIHNwZWNpZmljXG4gICAgKiBAcmV0dXJuIHtQcm9taXNlfSBhIHByb21pc2Ugb2JqZWN0XG4gICovXG4gIHJlbW92ZShyZXEsIHJlcykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBpZCA9IHJlcS5xdWVyeS5pZDtcbiAgICAgIGNvbnN0IHVpZCA9IHJlcy5sb2NhbHMudXNlci5pZDtcbiAgICAgIHRoaXMuUG9zdHNNb2RlbC5maW5kQnlJZChpZClcbiAgICAgIC50aGVuKChwb3N0KSA9PiB7XG4gICAgICAgIGlmICh1aWQgPT09IHBvc3QudWlkKSB7XG4gICAgICAgICAgdGhpcy5Qb3N0c01vZGVsLnJlbW92ZSh7IF9pZDogaWQgfSlcbiAgICAgICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgICAgICBmdWxmaWxsKHtcbiAgICAgICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdQb3N0IGRlbGV0ZWQhJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgICBzdGF0dXM6IDUwMCxcbiAgICAgICAgICAgICAgZXJyb3JcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgICBzdGF0dXM6IDQwMyxcbiAgICAgICAgICAgIG1lc3NhZ2U6ICdQZXJtaXNzaW9uIGRlbmllZCEnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgc3RhdHVzOiA1MDAsXG4gICAgICAgICAgZXJyb3JcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgICogQG1ldGhvZCBzZWFyY2hcbiAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXFcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSBoYXNodGFnXG4gICAgKiBAZGVzYyBzZWFyY2hlcyB0aGUgSGFzdGFnIGNvbGxlY3Rpb24gYW5kIGdldHMgdGhlaXIgcG9zdGlkcyBhbmQgcmV0dXJuXG4gICAgKiB0aGUgcG9zdHNcbiAgICAqIEByZXR1cm4ge1Byb21pc2V9IGEgcHJvbWlzZSBvYmplY3RcbiAgKi9cbiAgc2VhcmNoKHJlcSwgaGFzaHRhZykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBsaW1pdCA9IHBhcnNlSW50KHJlcS5xdWVyeS5saW1pdCwgMTApIHx8IDU7XG4gICAgICBjb25zdCBwYWdlID0gcGFyc2VJbnQocmVxLnF1ZXJ5LnBhZ2UsIDEwKSB8fCAwO1xuXG4gICAgICB0aGlzLkhhc2hUYWdNb2RlbC5zZWFyY2goaGFzaHRhZylcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICBjb25zdCBoYXNodGFncyA9IHJlc3BvbnNlLmRhdGE7XG5cbiAgICAgICAgaWYgKGhhc2h0YWdzKSB7XG4gICAgICAgICAgY29uc3QgcG9zdElkcyA9IGhhc2h0YWdzLnBvc3RfaWRzO1xuICAgICAgICAgIGNvbnN0IHBhdHRlcm4gPSB7ICRvcjogW10gfTtcbiAgICAgICAgICBwb3N0SWRzLmZvckVhY2goKHBvc3RJZCkgPT4ge1xuICAgICAgICAgICAgcGF0dGVybi4kb3IucHVzaCh7IF9pZDogcG9zdElkIH0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuUG9zdHNNb2RlbC5maW5kKHBhdHRlcm4pXG4gICAgICAgICAgLnNraXAocGFnZSAqIGxpbWl0KVxuICAgICAgICAgIC5saW1pdChsaW1pdClcbiAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICBmdWxmaWxsKHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICAgICAgICBkYXRhOiByZXN1bHRcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgICAgIHN0YXR1czogNDA0LFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdObyBwb3N0cyBmb3VuZCEnXG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZWplY3Qoe1xuICAgICAgICAgICAgc3RhdHVzOiA0MDQsXG4gICAgICAgICAgICBtZXNzYWdlOiAnTm8gcG9zdHMgZm91bmQhJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICByZWplY3Qoe1xuICAgICAgICAgIHN0YXR1czogNTAwLFxuICAgICAgICAgIG1lc3NhZ2U6ICdTb21ldGhpbmcgd2VudCB3cm9uZycsXG4gICAgICAgICAgZXJyb3JcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvc3RzTW9kZWw7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYXBwL21vZGVscy9Qb3N0c01vZGVsLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O0FBUUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBT0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUFPQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FBT0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQU1BO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBSEE7QUFLQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7QUFPQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQVFBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUNBOzs7Ozs7QUFJQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///12\n");

/***/ }),
/* 13 */
/*!**********************!*\
  !*** ./app/index.js ***!
  \**********************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nvar _express = __webpack_require__(/*! express */ 1);\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _dotenv = __webpack_require__(/*! dotenv */ 8);\n\nvar _dotenv2 = _interopRequireDefault(_dotenv);\n\nvar _bodyParser = __webpack_require__(/*! body-parser */ 14);\n\nvar _bodyParser2 = _interopRequireDefault(_bodyParser);\n\nvar _DB = __webpack_require__(/*! ./config/DB */ 15);\n\nvar _DB2 = _interopRequireDefault(_DB);\n\nvar _config = __webpack_require__(/*! ./config */ 2);\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _routes = __webpack_require__(/*! ./routes */ 16);\n\nvar _routes2 = _interopRequireDefault(_routes);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_dotenv2.default.config();\n\n_DB2.default.connect(_config2.default.mongodb_uri).then(function () {\n  var app = (0, _express2.default)();\n  var router = _express2.default.Router();\n  var baseRouter = new _routes2.default(router);\n  app.use(_bodyParser2.default.urlencoded({ extended: false }));\n  app.use(_bodyParser2.default.json());\n  app.use('/api/' + _config2.default.version.name + '/', baseRouter.routes());\n  app.listen(_config2.default.port, function () {\n    console.log('Application started on port', _config2.default.port);\n  });\n}).catch(function (error) {\n  console.log('Unable to connect to the database!', error);\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBwL2luZGV4LmpzPzIwMTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XG5pbXBvcnQgYm9keVBhcnNlciBmcm9tICdib2R5LXBhcnNlcic7XG5pbXBvcnQgREIgZnJvbSAnLi9jb25maWcvREInO1xuaW1wb3J0IGNvbmZpZyBmcm9tICcuL2NvbmZpZyc7XG5pbXBvcnQgQmFzZVJvdXRlciBmcm9tICcuL3JvdXRlcyc7XG5cbmRvdGVudi5jb25maWcoKTtcblxuREIuY29ubmVjdChjb25maWcubW9uZ29kYl91cmkpXG4udGhlbigoKSA9PiB7XG4gIGNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcbiAgY29uc3Qgcm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbiAgY29uc3QgYmFzZVJvdXRlciA9IG5ldyBCYXNlUm91dGVyKHJvdXRlcik7XG4gIGFwcC51c2UoYm9keVBhcnNlci51cmxlbmNvZGVkKHsgZXh0ZW5kZWQ6IGZhbHNlIH0pKTtcbiAgYXBwLnVzZShib2R5UGFyc2VyLmpzb24oKSk7XG4gIGFwcC51c2UoYC9hcGkvJHtjb25maWcudmVyc2lvbi5uYW1lfS9gLCBiYXNlUm91dGVyLnJvdXRlcygpKTtcbiAgYXBwLmxpc3Rlbihjb25maWcucG9ydCwgKCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdBcHBsaWNhdGlvbiBzdGFydGVkIG9uIHBvcnQnLCBjb25maWcucG9ydCk7XG4gIH0pO1xuXG59KVxuLmNhdGNoKChlcnJvcikgPT4ge1xuICBjb25zb2xlLmxvZygnVW5hYmxlIHRvIGNvbm5lY3QgdG8gdGhlIGRhdGFiYXNlIScsIGVycm9yKTtcbn0pO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFwcC9pbmRleC5qcyJdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7OztBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBRUE7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///13\n");

/***/ }),
/* 14 */
/*!******************************!*\
  !*** external "body-parser" ***!
  \******************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"body-parser\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJib2R5LXBhcnNlclwiPzQ2NTciXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiYm9keS1wYXJzZXJcIik7XG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gZXh0ZXJuYWwgXCJib2R5LXBhcnNlclwiXG4vLyBtb2R1bGUgaWQgPSAxNFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///14\n");

/***/ }),
/* 15 */
/*!**************************!*\
  !*** ./app/config/DB.js ***!
  \**************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar mongoose = __webpack_require__(/*! mongoose */ 0);\n/**\n  @class DB\n  @desc provides connection configuration to database\n*/\n\nvar DB = function () {\n  function DB() {\n    _classCallCheck(this, DB);\n  }\n\n  _createClass(DB, null, [{\n    key: 'connect',\n\n\n    /**\n      @method connect\n      @param {String} connectionUri\n      @desc perform the actual connection\n      @return {Promise} return a new promise\n    */\n    value: function connect(connectionUri) {\n      return new Promise(function (fufill, reject) {\n        mongoose.connect(connectionUri, { useMongoClient: true });\n        var connection = mongoose.connection;\n\n        connection.on('error', function (error) {\n          reject(error);\n        });\n        connection.once('open', function () {\n          fufill(true);\n        });\n      });\n    }\n  }]);\n\n  return DB;\n}();\n\nexports.default = DB;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBwL2NvbmZpZy9EQi5qcz80NzgxIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG1vbmdvb3NlID0gcmVxdWlyZSgnbW9uZ29vc2UnKTtcbi8qKlxuICBAY2xhc3MgREJcbiAgQGRlc2MgcHJvdmlkZXMgY29ubmVjdGlvbiBjb25maWd1cmF0aW9uIHRvIGRhdGFiYXNlXG4qL1xuY2xhc3MgREIge1xuXG4gIC8qKlxuICAgIEBtZXRob2QgY29ubmVjdFxuICAgIEBwYXJhbSB7U3RyaW5nfSBjb25uZWN0aW9uVXJpXG4gICAgQGRlc2MgcGVyZm9ybSB0aGUgYWN0dWFsIGNvbm5lY3Rpb25cbiAgICBAcmV0dXJuIHtQcm9taXNlfSByZXR1cm4gYSBuZXcgcHJvbWlzZVxuICAqL1xuICBzdGF0aWMgY29ubmVjdChjb25uZWN0aW9uVXJpKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdWZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgbW9uZ29vc2UuY29ubmVjdChjb25uZWN0aW9uVXJpLCB7IHVzZU1vbmdvQ2xpZW50OiB0cnVlIH0pO1xuICAgICAgY29uc3QgY29ubmVjdGlvbiA9IG1vbmdvb3NlLmNvbm5lY3Rpb247XG5cbiAgICAgIGNvbm5lY3Rpb24ub24oJ2Vycm9yJywgKGVycm9yKSA9PiB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9KTtcbiAgICAgIGNvbm5lY3Rpb24ub25jZSgnb3BlbicsICgpID0+IHtcbiAgICAgICAgZnVmaWxsKHRydWUpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgREI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYXBwL2NvbmZpZy9EQi5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBO0FBQ0E7Ozs7O0FBSUE7Ozs7Ozs7OztBQUVBOzs7Ozs7QUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///15\n");

/***/ }),
/* 16 */
/*!*****************************!*\
  !*** ./app/routes/index.js ***!
  \*****************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _UsersRoute = __webpack_require__(/*! ./UsersRoute */ 17);\n\nvar _UsersRoute2 = _interopRequireDefault(_UsersRoute);\n\nvar _PostsRoute = __webpack_require__(/*! ./PostsRoute */ 22);\n\nvar _PostsRoute2 = _interopRequireDefault(_PostsRoute);\n\nvar _SearchRoute = __webpack_require__(/*! ./SearchRoute */ 28);\n\nvar _SearchRoute2 = _interopRequireDefault(_SearchRoute);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n @class BaseRoute\n @desc Initialize all routes in the application\n */\nvar BaseRoute = function () {\n  /**\n   @method constructor\n   @param {Object} router  express router obj\n   */\n  function BaseRoute(router) {\n    _classCallCheck(this, BaseRoute);\n\n    this.router = router;\n    this.UsersRoute = new _UsersRoute2.default();\n    this.PostsRoute = new _PostsRoute2.default();\n    this.SearchRoute = new _SearchRoute2.default();\n  }\n\n  /**\n   @method routes\n   @desc loads all relevant routes for the app\n   @return {Object} express router object\n   */\n\n\n  _createClass(BaseRoute, [{\n    key: 'routes',\n    value: function routes() {\n      this.router.use('/users', this.UsersRoute.loadRoutes());\n      this.router.use('/posts', this.PostsRoute.loadRoutes());\n      this.router.use('/search', this.SearchRoute.loadRoutes());\n      this.router.use('/', function (req, res) {\n        res.status(200).send('Api root!');\n      });\n\n      return this.router;\n    }\n  }]);\n\n  return BaseRoute;\n}();\n\nexports.default = BaseRoute;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBwL3JvdXRlcy9pbmRleC5qcz82YTFlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBVc2Vyc1JvdXRlIGZyb20gJy4vVXNlcnNSb3V0ZSc7XG5pbXBvcnQgUG9zdHNSb3V0ZSBmcm9tICcuL1Bvc3RzUm91dGUnO1xuaW1wb3J0IFNlYXJjaFJvdXRlIGZyb20gJy4vU2VhcmNoUm91dGUnO1xuXG4vKipcbiBAY2xhc3MgQmFzZVJvdXRlXG4gQGRlc2MgSW5pdGlhbGl6ZSBhbGwgcm91dGVzIGluIHRoZSBhcHBsaWNhdGlvblxuICovXG5jbGFzcyBCYXNlUm91dGUge1xuICAvKipcbiAgIEBtZXRob2QgY29uc3RydWN0b3JcbiAgIEBwYXJhbSB7T2JqZWN0fSByb3V0ZXIgIGV4cHJlc3Mgcm91dGVyIG9ialxuICAgKi9cbiAgY29uc3RydWN0b3Iocm91dGVyKSB7XG4gICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG4gICAgdGhpcy5Vc2Vyc1JvdXRlID0gbmV3IFVzZXJzUm91dGUoKTtcbiAgICB0aGlzLlBvc3RzUm91dGUgPSBuZXcgUG9zdHNSb3V0ZSgpO1xuICAgIHRoaXMuU2VhcmNoUm91dGUgPSBuZXcgU2VhcmNoUm91dGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgQG1ldGhvZCByb3V0ZXNcbiAgIEBkZXNjIGxvYWRzIGFsbCByZWxldmFudCByb3V0ZXMgZm9yIHRoZSBhcHBcbiAgIEByZXR1cm4ge09iamVjdH0gZXhwcmVzcyByb3V0ZXIgb2JqZWN0XG4gICAqL1xuICByb3V0ZXMoKSB7XG4gICAgdGhpcy5yb3V0ZXIudXNlKCcvdXNlcnMnLCB0aGlzLlVzZXJzUm91dGUubG9hZFJvdXRlcygpKTtcbiAgICB0aGlzLnJvdXRlci51c2UoJy9wb3N0cycsIHRoaXMuUG9zdHNSb3V0ZS5sb2FkUm91dGVzKCkpO1xuICAgIHRoaXMucm91dGVyLnVzZSgnL3NlYXJjaCcsIHRoaXMuU2VhcmNoUm91dGUubG9hZFJvdXRlcygpKTtcbiAgICB0aGlzLnJvdXRlci51c2UoJy8nLCAocmVxLCByZXMpID0+IHtcbiAgICAgIHJlcy5zdGF0dXMoMjAwKS5zZW5kKCdBcGkgcm9vdCEnKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLnJvdXRlcjtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBCYXNlUm91dGU7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYXBwL3JvdXRlcy9pbmRleC5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7QUFBQTtBQUNBOzs7Ozs7O0FBQ0E7Ozs7QUFJQTtBQUNBOzs7O0FBSUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///16\n");

/***/ }),
/* 17 */
/*!**********************************!*\
  !*** ./app/routes/UsersRoute.js ***!
  \**********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _express = __webpack_require__(/*! express */ 1);\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _MediaHelper = __webpack_require__(/*! ../helpers/MediaHelper */ 9);\n\nvar _MediaHelper2 = _interopRequireDefault(_MediaHelper);\n\nvar _Authentication = __webpack_require__(/*! ../middleware/Authentication */ 3);\n\nvar _Authentication2 = _interopRequireDefault(_Authentication);\n\nvar _UsersController = __webpack_require__(/*! ./../controllers/UsersController */ 19);\n\nvar _UsersController2 = _interopRequireDefault(_UsersController);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n @class UsersRoute\n @desc Route for user related activities\n */\nvar UsersRoute = function () {\n\n  /**\n   @method constructor\n   @desc constructor to create acces to the express router\n   and provide acces to the UsersController\n   */\n  function UsersRoute() {\n    _classCallCheck(this, UsersRoute);\n\n    this.UsersController = new _UsersController2.default();\n    this.router = _express2.default.Router();\n    this.uploader = _MediaHelper2.default.setupUploader();\n  }\n\n  /**\n   @method loadRoutes\n   @desc provides the router access for current route\n   @return {Object}\n   */\n\n\n  _createClass(UsersRoute, [{\n    key: 'loadRoutes',\n    value: function loadRoutes() {\n      this.getUsers(); // fetching user route\n      this.addUser(); // adding new user route\n      this.remove(); // removing user route\n      this.update(); // a route to handle updating user details\n      this.login(); // a route to authenticate a user and get a new token\n      this.updatePassword(); //a route for updating the user's password\n      this.updateEmail(); // a route to update the user's email address\n      this.updateAvatar(); // update the user's avatar\n      return this.router;\n    }\n  }, {\n    key: 'login',\n    value: function login() {\n      var _this = this;\n\n      this.router.post('/login', function (req, res) {\n        _this.UsersController.login(req).then(function (response) {\n          res.status(response.status).json(response);\n        }).catch(function (error) {\n          res.status(error.status).json(error);\n        });\n      });\n    }\n\n    /**\n     *@method getUsers\n     @desc provide routes to list all users\n     */\n\n  }, {\n    key: 'getUsers',\n    value: function getUsers() {\n      var _this2 = this;\n\n      this.router.get('/', _Authentication2.default.authenticate, function (req, res) {\n        _this2.UsersController.getUsers(req).then(function (response) {\n          res.status(response.status).json(response);\n        }).catch(function (error) {\n          res.status(error.status).json(error);\n        });\n      });\n    }\n\n    /**\n     @method addUser\n     @desc provide router to create a new user\n     */\n\n  }, {\n    key: 'addUser',\n    value: function addUser() {\n      var _this3 = this;\n\n      this.router.post('/', function (req, res) {\n        _this3.UsersController.addUser(req).then(function (response) {\n          res.status(response.status).json(response);\n        }).catch(function (error) {\n          res.status(error.status).json(error);\n        });\n      });\n    }\n\n    /**\n     @method updateUser\n     @desc provide a route to update user details\n     */\n\n  }, {\n    key: 'update',\n    value: function update() {\n      var _this4 = this;\n\n      this.router.put('/', _Authentication2.default.authenticate, function (req, res) {\n        _this4.UsersController.update(req, res).then(function (response) {\n          res.status(response.status).json(response);\n        }).catch(function (error) {\n          res.status(error.status).json(error);\n        });\n      });\n    }\n\n    /**\n      * @method updatePassword\n      * @desc a route for users to update their password\n    */\n\n  }, {\n    key: 'updatePassword',\n    value: function updatePassword() {\n      var _this5 = this;\n\n      this.router.put('/password', _Authentication2.default.authenticate, function (req, res) {\n        _this5.UsersController.updatePassword(req, res).then(function (response) {\n          res.status(response.status).json(response);\n        }).catch(function (error) {\n          res.status(error.status).json(error);\n        });\n      });\n    }\n\n    /**\n      * @method updateEmail\n      * @desc a route for users to update their email address\n    */\n\n  }, {\n    key: 'updateEmail',\n    value: function updateEmail() {\n      var _this6 = this;\n\n      this.router.put('/email', _Authentication2.default.authenticate, function (req, res) {\n        _this6.UsersController.updateEmail(req, res).then(function (response) {\n          res.status(response.status).json(response);\n        }).catch(function (error) {\n          res.status(error.status).json(error);\n        });\n      });\n    }\n\n    /**\n      * @method updateAvatar\n      * @desc a route for users to update profile picture\n    */\n\n  }, {\n    key: 'updateAvatar',\n    value: function updateAvatar() {\n      var _this7 = this;\n\n      this.router.put('/avatar', _Authentication2.default.authenticate, this.uploader.any(), function (req, res) {\n        _this7.UsersController.updateAvatar(req, res).then(function (response) {\n          res.status(response.status).json(response);\n        }).catch(function (error) {\n          res.status(error.status).json(error);\n        });\n      });\n    }\n\n    /**\n     @method removeUser\n     @desc provides a route to remove a user\n     */\n\n  }, {\n    key: 'remove',\n    value: function remove() {\n      var _this8 = this;\n\n      this.router.delete('/', _Authentication2.default.authenticate, function (req, res) {\n        _this8.UsersController.remove(req, res).then(function (response) {\n          res.status(response.status).json(response);\n        }).catch(function (error) {\n          res.status(error.status).json(error);\n        });\n      });\n    }\n  }]);\n\n  return UsersRoute;\n}();\n\nexports.default = UsersRoute;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBwL3JvdXRlcy9Vc2Vyc1JvdXRlLmpzP2JkYzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgTWVkaWFIZWxwZXIgZnJvbSAnLi4vaGVscGVycy9NZWRpYUhlbHBlcic7XG5pbXBvcnQgQXV0aGVudGljYXRpb24gZnJvbSAnLi4vbWlkZGxld2FyZS9BdXRoZW50aWNhdGlvbic7XG5pbXBvcnQgVXNlcnNDb250cm9sbGVyIGZyb20gJy4vLi4vY29udHJvbGxlcnMvVXNlcnNDb250cm9sbGVyJztcblxuLyoqXG4gQGNsYXNzIFVzZXJzUm91dGVcbiBAZGVzYyBSb3V0ZSBmb3IgdXNlciByZWxhdGVkIGFjdGl2aXRpZXNcbiAqL1xuY2xhc3MgVXNlcnNSb3V0ZSB7XG5cbiAgLyoqXG4gICBAbWV0aG9kIGNvbnN0cnVjdG9yXG4gICBAZGVzYyBjb25zdHJ1Y3RvciB0byBjcmVhdGUgYWNjZXMgdG8gdGhlIGV4cHJlc3Mgcm91dGVyXG4gICBhbmQgcHJvdmlkZSBhY2NlcyB0byB0aGUgVXNlcnNDb250cm9sbGVyXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLlVzZXJzQ29udHJvbGxlciA9IG5ldyBVc2Vyc0NvbnRyb2xsZXIoKTtcbiAgICB0aGlzLnJvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG4gICAgdGhpcy51cGxvYWRlciA9IE1lZGlhSGVscGVyLnNldHVwVXBsb2FkZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgQG1ldGhvZCBsb2FkUm91dGVzXG4gICBAZGVzYyBwcm92aWRlcyB0aGUgcm91dGVyIGFjY2VzcyBmb3IgY3VycmVudCByb3V0ZVxuICAgQHJldHVybiB7T2JqZWN0fVxuICAgKi9cbiAgbG9hZFJvdXRlcygpIHtcbiAgICB0aGlzLmdldFVzZXJzKCk7IC8vIGZldGNoaW5nIHVzZXIgcm91dGVcbiAgICB0aGlzLmFkZFVzZXIoKTsgLy8gYWRkaW5nIG5ldyB1c2VyIHJvdXRlXG4gICAgdGhpcy5yZW1vdmUoKTsgLy8gcmVtb3ZpbmcgdXNlciByb3V0ZVxuICAgIHRoaXMudXBkYXRlKCk7IC8vIGEgcm91dGUgdG8gaGFuZGxlIHVwZGF0aW5nIHVzZXIgZGV0YWlsc1xuICAgIHRoaXMubG9naW4oKTsgLy8gYSByb3V0ZSB0byBhdXRoZW50aWNhdGUgYSB1c2VyIGFuZCBnZXQgYSBuZXcgdG9rZW5cbiAgICB0aGlzLnVwZGF0ZVBhc3N3b3JkKCk7IC8vYSByb3V0ZSBmb3IgdXBkYXRpbmcgdGhlIHVzZXIncyBwYXNzd29yZFxuICAgIHRoaXMudXBkYXRlRW1haWwoKTsgLy8gYSByb3V0ZSB0byB1cGRhdGUgdGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzXG4gICAgdGhpcy51cGRhdGVBdmF0YXIoKTsgLy8gdXBkYXRlIHRoZSB1c2VyJ3MgYXZhdGFyXG4gICAgcmV0dXJuIHRoaXMucm91dGVyO1xuICB9XG5cbiAgbG9naW4oKSB7XG4gICAgIHRoaXMucm91dGVyLnBvc3QoJy9sb2dpbicsIChyZXEsIHJlcykgPT4ge1xuICAgICAgdGhpcy5Vc2Vyc0NvbnRyb2xsZXIubG9naW4ocmVxKVxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICByZXMuc3RhdHVzKHJlc3BvbnNlLnN0YXR1cykuanNvbihyZXNwb25zZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICByZXMuc3RhdHVzKGVycm9yLnN0YXR1cykuanNvbihlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH0pOyAgIFxuICB9XG5cbiAgLyoqXG4gICAqQG1ldGhvZCBnZXRVc2Vyc1xuICAgQGRlc2MgcHJvdmlkZSByb3V0ZXMgdG8gbGlzdCBhbGwgdXNlcnNcbiAgICovXG4gIGdldFVzZXJzKCkge1xuICAgIHRoaXMucm91dGVyLmdldCgnLycsIEF1dGhlbnRpY2F0aW9uLmF1dGhlbnRpY2F0ZSwgKHJlcSwgcmVzKSA9PiB7XG4gICAgICB0aGlzLlVzZXJzQ29udHJvbGxlci5nZXRVc2VycyhyZXEpXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgIHJlcy5zdGF0dXMocmVzcG9uc2Uuc3RhdHVzKS5qc29uKHJlc3BvbnNlKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgIHJlcy5zdGF0dXMoZXJyb3Iuc3RhdHVzKS5qc29uKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgIEBtZXRob2QgYWRkVXNlclxuICAgQGRlc2MgcHJvdmlkZSByb3V0ZXIgdG8gY3JlYXRlIGEgbmV3IHVzZXJcbiAgICovXG4gIGFkZFVzZXIoKSB7XG4gICAgdGhpcy5yb3V0ZXIucG9zdCgnLycsIChyZXEsIHJlcykgPT4ge1xuICAgICAgdGhpcy5Vc2Vyc0NvbnRyb2xsZXIuYWRkVXNlcihyZXEpXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgIHJlcy5zdGF0dXMocmVzcG9uc2Uuc3RhdHVzKS5qc29uKHJlc3BvbnNlKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgIHJlcy5zdGF0dXMoZXJyb3Iuc3RhdHVzKS5qc29uKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgIEBtZXRob2QgdXBkYXRlVXNlclxuICAgQGRlc2MgcHJvdmlkZSBhIHJvdXRlIHRvIHVwZGF0ZSB1c2VyIGRldGFpbHNcbiAgICovXG4gIHVwZGF0ZSgpIHtcbiAgICB0aGlzLnJvdXRlci5wdXQoJy8nLCBBdXRoZW50aWNhdGlvbi5hdXRoZW50aWNhdGUsIChyZXEsIHJlcykgPT4ge1xuICAgICAgdGhpcy5Vc2Vyc0NvbnRyb2xsZXIudXBkYXRlKHJlcSwgcmVzKVxuICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICByZXMuc3RhdHVzKHJlc3BvbnNlLnN0YXR1cykuanNvbihyZXNwb25zZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICByZXMuc3RhdHVzKGVycm9yLnN0YXR1cykuanNvbihlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAgKiBAbWV0aG9kIHVwZGF0ZVBhc3N3b3JkXG4gICAgKiBAZGVzYyBhIHJvdXRlIGZvciB1c2VycyB0byB1cGRhdGUgdGhlaXIgcGFzc3dvcmRcbiAgKi9cbiAgdXBkYXRlUGFzc3dvcmQoKSB7XG4gICAgdGhpcy5yb3V0ZXIucHV0KCcvcGFzc3dvcmQnLCBBdXRoZW50aWNhdGlvbi5hdXRoZW50aWNhdGUsIChyZXEsIHJlcykgPT4ge1xuICAgICAgdGhpcy5Vc2Vyc0NvbnRyb2xsZXIudXBkYXRlUGFzc3dvcmQocmVxLCByZXMpXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgIHJlcy5zdGF0dXMocmVzcG9uc2Uuc3RhdHVzKS5qc29uKHJlc3BvbnNlKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgIHJlcy5zdGF0dXMoZXJyb3Iuc3RhdHVzKS5qc29uKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfSk7ICAgIFxuICB9XG5cbiAgLyoqXG4gICAgKiBAbWV0aG9kIHVwZGF0ZUVtYWlsXG4gICAgKiBAZGVzYyBhIHJvdXRlIGZvciB1c2VycyB0byB1cGRhdGUgdGhlaXIgZW1haWwgYWRkcmVzc1xuICAqL1xuICB1cGRhdGVFbWFpbCgpIHtcbiAgICB0aGlzLnJvdXRlci5wdXQoJy9lbWFpbCcsIEF1dGhlbnRpY2F0aW9uLmF1dGhlbnRpY2F0ZSwgKHJlcSwgcmVzKSA9PiB7XG4gICAgICB0aGlzLlVzZXJzQ29udHJvbGxlci51cGRhdGVFbWFpbChyZXEsIHJlcylcbiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgcmVzLnN0YXR1cyhyZXNwb25zZS5zdGF0dXMpLmpzb24ocmVzcG9uc2UpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgcmVzLnN0YXR1cyhlcnJvci5zdGF0dXMpLmpzb24oZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICB9KTsgICAgXG4gIH1cblxuICAvKipcbiAgICAqIEBtZXRob2QgdXBkYXRlQXZhdGFyXG4gICAgKiBAZGVzYyBhIHJvdXRlIGZvciB1c2VycyB0byB1cGRhdGUgcHJvZmlsZSBwaWN0dXJlXG4gICovXG4gIHVwZGF0ZUF2YXRhcigpIHtcbiAgICB0aGlzLnJvdXRlci5wdXQoJy9hdmF0YXInLCBBdXRoZW50aWNhdGlvbi5hdXRoZW50aWNhdGUsIFxuICAgICAgdGhpcy51cGxvYWRlci5hbnkoKSwgKHJlcSwgcmVzKSA9PiB7XG4gICAgICB0aGlzLlVzZXJzQ29udHJvbGxlci51cGRhdGVBdmF0YXIocmVxLCByZXMpXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgIHJlcy5zdGF0dXMocmVzcG9uc2Uuc3RhdHVzKS5qc29uKHJlc3BvbnNlKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgIHJlcy5zdGF0dXMoZXJyb3Iuc3RhdHVzKS5qc29uKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfSk7ICAgIFxuICB9XG5cbiAgLyoqXG4gICBAbWV0aG9kIHJlbW92ZVVzZXJcbiAgIEBkZXNjIHByb3ZpZGVzIGEgcm91dGUgdG8gcmVtb3ZlIGEgdXNlclxuICAgKi9cbiAgcmVtb3ZlKCkge1xuICAgIHRoaXMucm91dGVyLmRlbGV0ZSgnLycsIEF1dGhlbnRpY2F0aW9uLmF1dGhlbnRpY2F0ZSwgKHJlcSwgcmVzKSA9PiB7XG4gICAgICB0aGlzLlVzZXJzQ29udHJvbGxlci5yZW1vdmUocmVxLCByZXMpXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgIHJlcy5zdGF0dXMocmVzcG9uc2Uuc3RhdHVzKS5qc29uKHJlc3BvbnNlKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgIHJlcy5zdGF0dXMoZXJyb3Iuc3RhdHVzKS5qc29uKGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXNlcnNSb3V0ZTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBhcHAvcm91dGVzL1VzZXJzUm91dGUuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7OztBQUNBOzs7O0FBSUE7QUFDQTtBQUNBOzs7OztBQUtBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFJQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUlBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBSUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFJQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztBQUlBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O0FBSUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7QUFJQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///17\n");

/***/ }),
/* 18 */
/*!*************************!*\
  !*** external "multer" ***!
  \*************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"multer\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJtdWx0ZXJcIj9jMjkxIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIm11bHRlclwiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcIm11bHRlclwiXG4vLyBtb2R1bGUgaWQgPSAxOFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///18\n");

/***/ }),
/* 19 */
/*!********************************************!*\
  !*** ./app/controllers/UsersController.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _UsersModel = __webpack_require__(/*! ../models/UsersModel */ 5);\n\nvar _UsersModel2 = _interopRequireDefault(_UsersModel);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar UsersController = function () {\n  function UsersController() {\n    _classCallCheck(this, UsersController);\n\n    this.UsersModel = new _UsersModel2.default();\n  }\n\n  _createClass(UsersController, [{\n    key: 'login',\n    value: function login(req) {\n      var _this = this;\n\n      return new Promise(function (fulfill, reject) {\n        _this.UsersModel.login(req).then(function (response) {\n          fulfill(response);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    }\n  }, {\n    key: 'addUser',\n    value: function addUser(req) {\n      var _this2 = this;\n\n      return new Promise(function (fulfill, reject) {\n\n        _this2.UsersModel.addUser(req).then(function (response) {\n          fulfill(response);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    }\n  }, {\n    key: 'getUsers',\n    value: function getUsers(req) {\n      var _this3 = this;\n\n      return new Promise(function (fulfill, reject) {\n        _this3.UsersModel.getUsers(req).then(function (response) {\n          fulfill(response);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    }\n  }, {\n    key: 'update',\n    value: function update(req, res) {\n      var _this4 = this;\n\n      return new Promise(function (fulfill, reject) {\n        _this4.UsersModel.update(req, res).then(function (response) {\n          fulfill(response);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    }\n  }, {\n    key: 'updatePassword',\n    value: function updatePassword(req, res) {\n      var _this5 = this;\n\n      return new Promise(function (fulfill, reject) {\n        _this5.UsersModel.updatePassword(req, res).then(function (response) {\n          fulfill(response);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    }\n  }, {\n    key: 'updateEmail',\n    value: function updateEmail(req, res) {\n      var _this6 = this;\n\n      return new Promise(function (fulfill, reject) {\n        _this6.UsersModel.updateEmail(req, res).then(function (response) {\n          fulfill(response);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    }\n  }, {\n    key: 'updateAvatar',\n    value: function updateAvatar(req, res) {\n      var _this7 = this;\n\n      return new Promise(function (fulfill, reject) {\n        _this7.UsersModel.updateAvatar(req, res).then(function (response) {\n          fulfill(response);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    }\n  }, {\n    key: 'remove',\n    value: function remove(req, res) {\n      var _this8 = this;\n\n      return new Promise(function (fulfill, reject) {\n        _this8.UsersModel.remove(req, res).then(function (response) {\n          fulfill(response);\n        }).catch(function (error) {\n          reject(error);\n        });\n      });\n    }\n  }]);\n\n  return UsersController;\n}();\n\nexports.default = UsersController;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMTkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBwL2NvbnRyb2xsZXJzL1VzZXJzQ29udHJvbGxlci5qcz81NjNkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBVc2Vyc01vZGVsIGZyb20gJy4uL21vZGVscy9Vc2Vyc01vZGVsJztcblxuY2xhc3MgVXNlcnNDb250cm9sbGVyIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5Vc2Vyc01vZGVsID0gbmV3IFVzZXJzTW9kZWwoKTtcbiAgfVxuXG4gIGxvZ2luKHJlcSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLlVzZXJzTW9kZWwubG9naW4ocmVxKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGZ1bGZpbGwocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH0pO1xuICAgIH0pOyAgIFxuICB9XG5cbiAgYWRkVXNlcihyZXEpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgXG4gICAgICB0aGlzLlVzZXJzTW9kZWwuYWRkVXNlcihyZXEpXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICAgIGZ1bGZpbGwocmVzcG9uc2UpO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRVc2VycyhyZXEpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5Vc2Vyc01vZGVsLmdldFVzZXJzKHJlcSlcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICBmdWxmaWxsKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZShyZXEsIHJlcykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZnVsZmlsbCwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLlVzZXJzTW9kZWwudXBkYXRlKHJlcSwgcmVzKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGZ1bGZpbGwocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlUGFzc3dvcmQocmVxLCByZXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5Vc2Vyc01vZGVsLnVwZGF0ZVBhc3N3b3JkKHJlcSwgcmVzKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGZ1bGZpbGwocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlRW1haWwocmVxLCByZXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5Vc2Vyc01vZGVsLnVwZGF0ZUVtYWlsKHJlcSwgcmVzKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGZ1bGZpbGwocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlQXZhdGFyKHJlcSwgcmVzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuVXNlcnNNb2RlbC51cGRhdGVBdmF0YXIocmVxLCByZXMpXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgZnVsZmlsbChyZXNwb25zZSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfSk7XG4gICAgfSk7ICAgIFxuICB9XG5cbiAgcmVtb3ZlKHJlcSwgcmVzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuVXNlcnNNb2RlbC5yZW1vdmUocmVxLCByZXMpXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgZnVsZmlsbChyZXNwb25zZSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBVc2Vyc0NvbnRyb2xsZXI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYXBwL2NvbnRyb2xsZXJzL1VzZXJzQ29udHJvbGxlci5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTtBQUNBOzs7Ozs7O0FBQ0E7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7OztBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBSUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///19\n");

/***/ }),
/* 20 */
/*!*************************!*\
  !*** external "bcrypt" ***!
  \*************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"bcrypt\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJiY3J5cHRcIj8wMzllIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcImJjcnlwdFwiKTtcblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyBleHRlcm5hbCBcImJjcnlwdFwiXG4vLyBtb2R1bGUgaWQgPSAyMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///20\n");

/***/ }),
/* 21 */
/*!***********************************!*\
  !*** ./app/schema/UsersSchema.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _mongoose = __webpack_require__(/*! mongoose */ 0);\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nvar _Validation = __webpack_require__(/*! ../helpers/Validation */ 6);\n\nvar _Validation2 = _interopRequireDefault(_Validation);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Schema = _mongoose2.default.Schema;\n\nvar UsersSchema = new Schema({\n  fullname: {\n    type: String,\n    maxlength: 30,\n    required: true,\n    default: ''\n  },\n\n  photo: {\n    type: String\n  },\n\n  username: {\n    type: String,\n    validate: [{\n      validator: _Validation2.default.isValidUsername,\n      msg: 'Invalid username! Ensure username has no space'\n    }],\n    unique: [true, 'Username is already taken'],\n    maxlength: [30, 'Username is too long, try something shorter'],\n    minlength: [3, 'Username is too short, try at least 3 characters'],\n    required: true\n  },\n\n  email: {\n    type: String,\n    validate: [{\n      validator: _Validation2.default.isValidEmail,\n      msg: 'Invalid email, ensure the @ comes before the domain name'\n    }],\n    required: true,\n    unique: [true, 'This email `{VALUE}` already exists'],\n    maxlength: [100, 'Email is too long']\n  },\n\n  bio: {\n    type: String,\n    maxlength: 140\n  },\n\n  gender: {\n    type: String,\n    maxlength: 6,\n    minlength: 4,\n    required: true,\n    default: 'None'\n  },\n\n  phone: {\n    type: String,\n    maxlength: 15\n  },\n\n  password: {\n    type: String,\n    required: true\n  },\n\n  date_joined: {\n    type: Date,\n    default: Date.now\n  }\n});\n\nexports.default = UsersSchema;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjEuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBwL3NjaGVtYS9Vc2Vyc1NjaGVtYS5qcz8zNmY5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb2dvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCBWYWxpZGF0aW9uIGZyb20gXCIuLi9oZWxwZXJzL1ZhbGlkYXRpb25cIjtcblxuY29uc3QgU2NoZW1hID0gbW9nb29zZS5TY2hlbWE7XG5cbmNvbnN0IFVzZXJzU2NoZW1hID0gbmV3IFNjaGVtYSh7XG4gIGZ1bGxuYW1lOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIG1heGxlbmd0aDogMzAsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgZGVmYXVsdDogJydcbiAgfSxcblxuICBwaG90bzoge1xuICAgIHR5cGU6IFN0cmluZ1xuICB9LFxuICBcbiAgdXNlcm5hbWU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgdmFsaWRhdGU6IFt7XG4gICAgICB2YWxpZGF0b3I6IFZhbGlkYXRpb24uaXNWYWxpZFVzZXJuYW1lLFxuICAgICAgbXNnOiAnSW52YWxpZCB1c2VybmFtZSEgRW5zdXJlIHVzZXJuYW1lIGhhcyBubyBzcGFjZSdcbiAgICB9XSxcbiAgICB1bmlxdWU6IFt0cnVlLCAnVXNlcm5hbWUgaXMgYWxyZWFkeSB0YWtlbiddLFxuICAgIG1heGxlbmd0aDogWzMwLCAnVXNlcm5hbWUgaXMgdG9vIGxvbmcsIHRyeSBzb21ldGhpbmcgc2hvcnRlciddLFxuICAgIG1pbmxlbmd0aDogWzMsICdVc2VybmFtZSBpcyB0b28gc2hvcnQsIHRyeSBhdCBsZWFzdCAzIGNoYXJhY3RlcnMnXSxcbiAgICByZXF1aXJlZDogdHJ1ZVxuICB9LFxuXG4gIGVtYWlsOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHZhbGlkYXRlOiBbe1xuICAgICAgdmFsaWRhdG9yOiBWYWxpZGF0aW9uLmlzVmFsaWRFbWFpbCxcbiAgICAgIG1zZzogJ0ludmFsaWQgZW1haWwsIGVuc3VyZSB0aGUgQCBjb21lcyBiZWZvcmUgdGhlIGRvbWFpbiBuYW1lJ1xuICAgIH1dLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICAgIHVuaXF1ZTogW3RydWUsICdUaGlzIGVtYWlsIGB7VkFMVUV9YCBhbHJlYWR5IGV4aXN0cyddLFxuICAgIG1heGxlbmd0aDogWzEwMCwgJ0VtYWlsIGlzIHRvbyBsb25nJ11cbiAgfSxcblxuICBiaW86IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgbWF4bGVuZ3RoOiAxNDBcbiAgfSxcblxuICBnZW5kZXI6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgbWF4bGVuZ3RoOiA2LFxuICAgIG1pbmxlbmd0aDogNCxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnTm9uZSdcbiAgfSxcblxuICBwaG9uZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICBtYXhsZW5ndGg6IDE1XG4gIH0sXG5cbiAgcGFzc3dvcmQ6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWVcbiAgfSxcblxuICBkYXRlX2pvaW5lZDoge1xuICAgIHR5cGU6IERhdGUsXG4gICAgZGVmYXVsdDogRGF0ZS5ub3dcbiAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJzU2NoZW1hO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFwcC9zY2hlbWEvVXNlcnNTY2hlbWEuanMiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBREE7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFDQTtBQVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTtBQVJBO0FBQ0E7QUFVQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFDQTtBQU9BO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUExREE7QUFDQTtBQStEQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///21\n");

/***/ }),
/* 22 */
/*!**********************************!*\
  !*** ./app/routes/PostsRoute.js ***!
  \**********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _express = __webpack_require__(/*! express */ 1);\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _path = __webpack_require__(/*! path */ 23);\n\nvar _path2 = _interopRequireDefault(_path);\n\nvar _MediaHelper = __webpack_require__(/*! ../helpers/MediaHelper */ 9);\n\nvar _MediaHelper2 = _interopRequireDefault(_MediaHelper);\n\nvar _Authentication = __webpack_require__(/*! ../middleware/Authentication */ 3);\n\nvar _Authentication2 = _interopRequireDefault(_Authentication);\n\nvar _PostsController = __webpack_require__(/*! ../controllers/PostsController */ 24);\n\nvar _PostsController2 = _interopRequireDefault(_PostsController);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PostsRoute = function () {\n  function PostsRoute() {\n    _classCallCheck(this, PostsRoute);\n\n    this.PostsController = new _PostsController2.default();\n    this.router = _express2.default.Router();\n    this.uploader = _MediaHelper2.default.setupUploader();\n  }\n\n  _createClass(PostsRoute, [{\n    key: 'loadRoutes',\n    value: function loadRoutes() {\n\n      this.create();\n      this.view();\n      this.update();\n      this.remove();\n      return this.router;\n    }\n  }, {\n    key: 'create',\n    value: function create() {\n      var _this = this;\n\n      this.router.post('/', _Authentication2.default.authenticate, this.uploader.array('media'), function (req, res) {\n\n        _this.PostsController.create(req, res).then(function (response) {\n          res.status(response.status).json(response);\n        }).catch(function (response) {\n          res.status(response.status).json(response);\n        });\n      });\n    }\n  }, {\n    key: 'view',\n    value: function view() {\n      var _this2 = this;\n\n      this.router.get('/', _Authentication2.default.authenticate, function (req, res) {\n        _this2.PostsController.view(req, res).then(function (response) {\n          res.status(response.status).json(response);\n        }).catch(function (response) {\n          res.status(response.status).json(response);\n        });\n      });\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var _this3 = this;\n\n      this.router.put('/', _Authentication2.default.authenticate, function (req, res) {\n        _this3.PostsController.update(req, res).then(function (response) {\n          res.status(response.status).json(response);\n        }).catch(function (response) {\n          res.status(response.status).json(response);\n        });\n      });\n    }\n  }, {\n    key: 'remove',\n    value: function remove() {\n      var _this4 = this;\n\n      this.router.delete('/', _Authentication2.default.authenticate, function (req, res) {\n        _this4.PostsController.remove(req, res).then(function (response) {\n          res.status(response.status).json(response);\n        }).catch(function (response) {\n          res.status(response.status).json(response);\n        });\n      });\n    }\n  }]);\n\n  return PostsRoute;\n}();\n\nexports.default = PostsRoute;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjIuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBwL3JvdXRlcy9Qb3N0c1JvdXRlLmpzPzFhMmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCBNZWRpYUhlbHBlciBmcm9tICcuLi9oZWxwZXJzL01lZGlhSGVscGVyJztcbmltcG9ydCBBdXRoZW50aWNhdGlvbiBmcm9tICcuLi9taWRkbGV3YXJlL0F1dGhlbnRpY2F0aW9uJztcbmltcG9ydCBQb3N0c0NvbnRyb2xsZXIgZnJvbSAnLi4vY29udHJvbGxlcnMvUG9zdHNDb250cm9sbGVyJztcblxuY2xhc3MgUG9zdHNSb3V0ZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuUG9zdHNDb250cm9sbGVyID0gbmV3IFBvc3RzQ29udHJvbGxlcigpO1xuICAgIHRoaXMucm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbiAgICB0aGlzLnVwbG9hZGVyID0gTWVkaWFIZWxwZXIuc2V0dXBVcGxvYWRlcigpO1xuICB9XG5cbiAgbG9hZFJvdXRlcygpIHtcbiBcbiAgICB0aGlzLmNyZWF0ZSgpO1xuICAgIHRoaXMudmlldygpO1xuICAgIHRoaXMudXBkYXRlKCk7XG4gICAgdGhpcy5yZW1vdmUoKTtcbiAgICByZXR1cm4gdGhpcy5yb3V0ZXI7XG4gIH1cblxuICBjcmVhdGUoKSB7XG4gICAgdGhpcy5yb3V0ZXIucG9zdCgnLycsIEF1dGhlbnRpY2F0aW9uLmF1dGhlbnRpY2F0ZSwgXG4gICAgICB0aGlzLnVwbG9hZGVyLmFycmF5KCdtZWRpYScpLCAocmVxLCByZXMpID0+IHtcblxuICAgICAgdGhpcy5Qb3N0c0NvbnRyb2xsZXIuY3JlYXRlKHJlcSwgcmVzKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIHJlcy5zdGF0dXMocmVzcG9uc2Uuc3RhdHVzKS5qc29uKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIHJlcy5zdGF0dXMocmVzcG9uc2Uuc3RhdHVzKS5qc29uKHJlc3BvbnNlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgdmlldygpIHtcbiAgICB0aGlzLnJvdXRlci5nZXQoJy8nLCBBdXRoZW50aWNhdGlvbi5hdXRoZW50aWNhdGUsIChyZXEsIHJlcykgPT4ge1xuICAgICAgdGhpcy5Qb3N0c0NvbnRyb2xsZXIudmlldyhyZXEsIHJlcylcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICByZXMuc3RhdHVzKHJlc3BvbnNlLnN0YXR1cykuanNvbihyZXNwb25zZSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChyZXNwb25zZSkgPT4ge1xuICAgICAgICByZXMuc3RhdHVzKHJlc3BvbnNlLnN0YXR1cykuanNvbihyZXNwb25zZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHVwZGF0ZSgpIHtcbiAgICB0aGlzLnJvdXRlci5wdXQoJy8nLCBBdXRoZW50aWNhdGlvbi5hdXRoZW50aWNhdGUsIChyZXEsIHJlcykgPT4ge1xuICAgICAgdGhpcy5Qb3N0c0NvbnRyb2xsZXIudXBkYXRlKHJlcSwgcmVzKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIHJlcy5zdGF0dXMocmVzcG9uc2Uuc3RhdHVzKS5qc29uKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIHJlcy5zdGF0dXMocmVzcG9uc2Uuc3RhdHVzKS5qc29uKHJlc3BvbnNlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmVtb3ZlKCkge1xuICAgIHRoaXMucm91dGVyLmRlbGV0ZSgnLycsIEF1dGhlbnRpY2F0aW9uLmF1dGhlbnRpY2F0ZSwgKHJlcSwgcmVzKSA9PiB7XG4gICAgICB0aGlzLlBvc3RzQ29udHJvbGxlci5yZW1vdmUocmVxLCByZXMpXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgcmVzLnN0YXR1cyhyZXNwb25zZS5zdGF0dXMpLmpzb24ocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgocmVzcG9uc2UpID0+IHtcbiAgICAgICAgcmVzLnN0YXR1cyhyZXNwb25zZS5zdGF0dXMpLmpzb24ocmVzcG9uc2UpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9zdHNSb3V0ZTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBhcHAvcm91dGVzL1Bvc3RzUm91dGUuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7OztBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///22\n");

/***/ }),
/* 23 */
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports) {

eval("module.exports = require(\"path\");//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJwYXRoXCI/NWIyYSJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJwYXRoXCIpO1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIGV4dGVybmFsIFwicGF0aFwiXG4vLyBtb2R1bGUgaWQgPSAyM1xuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///23\n");

/***/ }),
/* 24 */
/*!********************************************!*\
  !*** ./app/controllers/PostsController.js ***!
  \********************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _PostsModel = __webpack_require__(/*! ../models/PostsModel */ 12);\n\nvar _PostsModel2 = _interopRequireDefault(_PostsModel);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar PostsController = function () {\n  function PostsController() {\n    _classCallCheck(this, PostsController);\n\n    this.PostsModel = new _PostsModel2.default();\n  }\n\n  _createClass(PostsController, [{\n    key: 'create',\n    value: function create(req, res) {\n      var _this = this;\n\n      return new Promise(function (fulfill, reject) {\n        _this.PostsModel.create(req, res).then(function (response) {\n          fulfill(response);\n        }).catch(function (response) {\n          reject(response);\n        });\n      });\n    }\n  }, {\n    key: 'view',\n    value: function view(req, res) {\n      var _this2 = this;\n\n      return new Promise(function (fulfill, reject) {\n        _this2.PostsModel.view(req, res).then(function (response) {\n          fulfill(response);\n        }).catch(function (response) {\n          reject(response);\n        });\n      });\n    }\n  }, {\n    key: 'update',\n    value: function update(req, res) {\n      var _this3 = this;\n\n      return new Promise(function (fulfill, reject) {\n        _this3.PostsModel.update(req, res).then(function (response) {\n          fulfill(response);\n        }).catch(function (response) {\n          reject(response);\n        });\n      });\n    }\n  }, {\n    key: 'remove',\n    value: function remove(req, res) {\n      var _this4 = this;\n\n      return new Promise(function (fulfill, reject) {\n        _this4.PostsModel.remove(req, res).then(function (response) {\n          fulfill(response);\n        }).catch(function (response) {\n          reject(response);\n        });\n      });\n    }\n  }]);\n\n  return PostsController;\n}();\n\nexports.default = PostsController;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjQuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBwL2NvbnRyb2xsZXJzL1Bvc3RzQ29udHJvbGxlci5qcz80NjI5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQb3N0c01vZGVsIGZyb20gJy4uL21vZGVscy9Qb3N0c01vZGVsJztcblxuXG5jbGFzcyBQb3N0c0NvbnRyb2xsZXIge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLlBvc3RzTW9kZWwgPSBuZXcgUG9zdHNNb2RlbCgpO1xuICB9XG5cbiAgY3JlYXRlKHJlcSwgcmVzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuUG9zdHNNb2RlbC5jcmVhdGUocmVxLCByZXMpXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgZnVsZmlsbChyZXNwb25zZSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChyZXNwb25zZSkgPT4ge1xuICAgICAgICByZWplY3QocmVzcG9uc2UpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICB2aWV3KHJlcSwgcmVzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuUG9zdHNNb2RlbC52aWV3KHJlcSwgcmVzKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGZ1bGZpbGwocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgocmVzcG9uc2UpID0+IHtcbiAgICAgICAgcmVqZWN0KHJlc3BvbnNlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlKHJlcSwgcmVzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuUG9zdHNNb2RlbC51cGRhdGUocmVxLCByZXMpXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgZnVsZmlsbChyZXNwb25zZSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChyZXNwb25zZSkgPT4ge1xuICAgICAgICByZWplY3QocmVzcG9uc2UpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICByZW1vdmUocmVxLCByZXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5Qb3N0c01vZGVsLnJlbW92ZShyZXEsIHJlcylcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICBmdWxmaWxsKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIHJlamVjdChyZXNwb25zZSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvc3RzQ29udHJvbGxlcjtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBhcHAvY29udHJvbGxlcnMvUG9zdHNDb250cm9sbGVyLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFFQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBSUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///24\n");

/***/ }),
/* 25 */
/*!***********************************!*\
  !*** ./app/schema/PostsSchema.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _mongoose = __webpack_require__(/*! mongoose */ 0);\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Schema = _mongoose2.default.Schema;\nvar PostsSchema = new Schema({\n\n  media: {\n    type: Array,\n    required: true\n  },\n\n  caption: {\n    type: String,\n    maxlength: [100, 'Caption is too long'],\n    default: ''\n  },\n\n  description: {\n    type: String,\n    default: ''\n  },\n\n  uid: {\n    type: String,\n    required: true\n  },\n\n  likes: {\n    type: Array\n  },\n\n  comments: {\n    type: Array\n  },\n\n  date: {\n    type: Date,\n    default: Date.now\n  },\n\n  has_cash: {\n    type: Boolean,\n    default: false\n  }\n});\n\nexports.default = PostsSchema;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjUuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBwL3NjaGVtYS9Qb3N0c1NjaGVtYS5qcz9hMDA2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tICdtb25nb29zZSc7XG5cbmNvbnN0IFNjaGVtYSA9IG1vbmdvb3NlLlNjaGVtYTtcbmNvbnN0IFBvc3RzU2NoZW1hID0gbmV3IFNjaGVtYSh7XG5cbiAgbWVkaWE6IHtcbiAgICB0eXBlOiBBcnJheSxcbiAgICByZXF1aXJlZDogdHJ1ZVxuICB9LFxuXG4gIGNhcHRpb246IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgbWF4bGVuZ3RoOiBbMTAwLCAnQ2FwdGlvbiBpcyB0b28gbG9uZyddLFxuICAgIGRlZmF1bHQ6ICcnXG4gIH0sXG5cbiAgZGVzY3JpcHRpb246IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogJydcbiAgfSxcblxuICB1aWQ6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWVcbiAgfSxcblxuICBsaWtlczoge1xuICAgIHR5cGU6IEFycmF5XG4gIH0sXG5cbiAgY29tbWVudHM6IHtcbiAgICB0eXBlOiBBcnJheVxuICB9LFxuXG4gIGRhdGU6IHtcbiAgICB0eXBlOiBEYXRlLFxuICAgIGRlZmF1bHQ6IERhdGUubm93XG4gIH0sXG5cbiAgaGFzX2Nhc2g6IHtcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH1cbn0pO1xuXG5leHBvcnQgZGVmYXVsdCBQb3N0c1NjaGVtYTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBhcHAvc2NoZW1hL1Bvc3RzU2NoZW1hLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBOzs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFEQTtBQUNBO0FBR0E7QUFDQTtBQURBO0FBQ0E7QUFHQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFwQ0E7QUFDQTtBQXlDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///25\n");

/***/ }),
/* 26 */
/*!**************************************!*\
  !*** ./app/helpers/HashTagHelper.js ***!
  \**************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar HashTagHelper = function () {\n  function HashTagHelper() {\n    _classCallCheck(this, HashTagHelper);\n  }\n\n  _createClass(HashTagHelper, null, [{\n    key: 'getHashTag',\n    value: function getHashTag(post) {\n      var words = post.split(' ');\n      var hashtags = [];\n      words.filter(function (word) {\n        var regex = new RegExp(/(?:^|\\s)(?:#)([a-zA-Z\\d]+)/ig);\n        if (regex.test(word)) {\n          hashtags.push(word.substring(1));\n        }\n      });\n      return hashtags;\n    }\n\n    /**\n      * @method compare\n      * @param {Array} old\n      * @param {Array} newer\n      * @desc compare two set of hashtags, and return an object\n      * @return {object} object literal with key obsolete and newer\n    */\n\n  }, {\n    key: 'compare',\n    value: function compare(old, newer) {\n      var duplicate = old.filter(function (word) {\n        if (newer.indexOf(word) >= 0) {\n          return word;\n        }\n      });\n      duplicate.forEach(function (word) {\n        old.splice(old.indexOf(word), 1);\n        newer.splice(newer.indexOf(word), 1);\n      });\n      return {\n        obsolete: old,\n        newer: newer\n      };\n    }\n  }]);\n\n  return HashTagHelper;\n}();\n\nexports.default = HashTagHelper;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjYuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBwL2hlbHBlcnMvSGFzaFRhZ0hlbHBlci5qcz84NjFmIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEhhc2hUYWdIZWxwZXIge1xuXG4gIHN0YXRpYyBnZXRIYXNoVGFnKHBvc3QpIHtcbiAgICBjb25zdCB3b3JkcyA9IHBvc3Quc3BsaXQoJyAnKTtcbiAgICBjb25zdCBoYXNodGFncyA9IFtdO1xuICAgIHdvcmRzLmZpbHRlcigod29yZCkgPT4ge1xuICAgICAgY29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKC8oPzpefFxccykoPzojKShbYS16QS1aXFxkXSspL2lnKTtcbiAgICAgIGlmKHJlZ2V4LnRlc3Qod29yZCkpIHtcbiAgICAgICAgaGFzaHRhZ3MucHVzaCh3b3JkLnN1YnN0cmluZygxKSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGhhc2h0YWdzO1xuICB9XG5cbiAgLyoqXG4gICAgKiBAbWV0aG9kIGNvbXBhcmVcbiAgICAqIEBwYXJhbSB7QXJyYXl9IG9sZFxuICAgICogQHBhcmFtIHtBcnJheX0gbmV3ZXJcbiAgICAqIEBkZXNjIGNvbXBhcmUgdHdvIHNldCBvZiBoYXNodGFncywgYW5kIHJldHVybiBhbiBvYmplY3RcbiAgICAqIEByZXR1cm4ge29iamVjdH0gb2JqZWN0IGxpdGVyYWwgd2l0aCBrZXkgb2Jzb2xldGUgYW5kIG5ld2VyXG4gICovXG4gIHN0YXRpYyBjb21wYXJlKG9sZCwgbmV3ZXIpIHtcbiAgICBsZXQgZHVwbGljYXRlID0gb2xkLmZpbHRlcigod29yZCkgPT4ge1xuICAgICAgaWYobmV3ZXIuaW5kZXhPZih3b3JkKSA+PSAwKSB7XG4gICAgICAgIHJldHVybiB3b3JkO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGR1cGxpY2F0ZS5mb3JFYWNoKCh3b3JkKSA9PiB7XG4gICAgICBvbGQuc3BsaWNlKG9sZC5pbmRleE9mKHdvcmQpLCAxKTtcbiAgICAgIG5ld2VyLnNwbGljZShuZXdlci5pbmRleE9mKHdvcmQpLCAxKTtcbiAgICB9KTtcbiAgICByZXR1cm4ge1xuICAgICAgb2Jzb2xldGU6IG9sZCxcbiAgICAgIG5ld2VyXG4gICAgfTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBIYXNoVGFnSGVscGVyO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFwcC9oZWxwZXJzL0hhc2hUYWdIZWxwZXIuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7Ozs7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O0FBT0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7Ozs7QUFHQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///26\n");

/***/ }),
/* 27 */
/*!*************************************!*\
  !*** ./app/schema/HashTagSchema.js ***!
  \*************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _mongoose = __webpack_require__(/*! mongoose */ 0);\n\nvar _mongoose2 = _interopRequireDefault(_mongoose);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar Schema = _mongoose2.default.Schema;\nvar HashTagSchema = new Schema({\n  title: {\n    type: String,\n    required: true,\n    unique: true\n  },\n\n  post_ids: {\n    type: Array,\n    required: true\n  },\n\n  total_posts: {\n    type: Number,\n    required: true\n  }\n});\n\nexports.default = HashTagSchema;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjcuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBwL3NjaGVtYS9IYXNoVGFnU2NoZW1hLmpzPzI4YzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcblxuY29uc3QgU2NoZW1hID0gbW9uZ29vc2UuU2NoZW1hO1xuY29uc3QgSGFzaFRhZ1NjaGVtYSA9IG5ldyBTY2hlbWEoe1xuICB0aXRsZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgICB1bmlxdWU6IHRydWVcbiAgfSxcblxuICBwb3N0X2lkczoge1xuICAgIHR5cGU6IEFycmF5LFxuICAgIHJlcXVpcmVkOiB0cnVlXG4gIH0sXG5cbiAgdG90YWxfcG9zdHM6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgcmVxdWlyZWQ6IHRydWVcbiAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEhhc2hUYWdTY2hlbWE7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYXBwL3NjaGVtYS9IYXNoVGFnU2NoZW1hLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBOzs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFLQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTtBQUNBO0FBRkE7QUFaQTtBQUNBO0FBaUJBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///27\n");

/***/ }),
/* 28 */
/*!***********************************!*\
  !*** ./app/routes/SearchRoute.js ***!
  \***********************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _express = __webpack_require__(/*! express */ 1);\n\nvar _express2 = _interopRequireDefault(_express);\n\nvar _Authentication = __webpack_require__(/*! ../middleware/Authentication */ 3);\n\nvar _Authentication2 = _interopRequireDefault(_Authentication);\n\nvar _SearchController = __webpack_require__(/*! ../controllers/SearchController */ 29);\n\nvar _SearchController2 = _interopRequireDefault(_SearchController);\n\nvar _HashTagModel = __webpack_require__(/*! ../models/HashTagModel */ 7);\n\nvar _HashTagModel2 = _interopRequireDefault(_HashTagModel);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SearchRoute = function () {\n  function SearchRoute() {\n    _classCallCheck(this, SearchRoute);\n\n    this.router = _express2.default.Router();\n    this.SearchController = new _SearchController2.default();\n  }\n\n  _createClass(SearchRoute, [{\n    key: 'loadRoutes',\n    value: function loadRoutes() {\n      this.hashtag(); // a route for searching for hashtags\n      this.user(); // a route for searching user\n      this.all(); // search for both hashtags and users\n      this.suggest(); // suggest result\n      return this.router;\n    }\n  }, {\n    key: 'all',\n    value: function all() {\n      var _this = this;\n\n      this.router.get('/:term', _Authentication2.default.authenticate, function (req, res) {\n        _this.SearchController.all(req, res).then(function (response) {\n          res.status(response.status).json(response);\n        }).catch(function (error) {\n          res.status(error.status).json(error);\n        });\n      });\n    }\n  }, {\n    key: 'suggest',\n    value: function suggest() {\n      var _this2 = this;\n\n      this.router.get('/suggest/:term', _Authentication2.default.authenticate, function (req, res) {\n        _this2.SearchController.suggest(req).then(function (response) {\n          res.status(response.status).json(response);\n        }).catch(function (error) {\n          res.status(error.status).json(error);\n        });\n      });\n    }\n  }, {\n    key: 'hashtag',\n    value: function hashtag() {\n      var _this3 = this;\n\n      this.router.get('/hashtag/:hashtag', _Authentication2.default.authenticate, function (req, res) {\n        _this3.SearchController.hashtag(req, res).then(function (response) {\n          res.status(response.status).json(response);\n        }).catch(function (error) {\n          res.status(error.status).json(error);\n        });\n      });\n    }\n  }, {\n    key: 'user',\n    value: function user() {\n      var _this4 = this;\n\n      this.router.get('/user/:user', _Authentication2.default.authenticate, function (req, res) {\n        _this4.SearchController.user(req, res).then(function (response) {\n          res.status(response.status).json(response);\n        }).catch(function (error) {\n          res.status(error.status).json(error);\n        });\n      });\n    }\n  }]);\n\n  return SearchRoute;\n}();\n\nexports.default = SearchRoute;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBwL3JvdXRlcy9TZWFyY2hSb3V0ZS5qcz9lNDUyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IEF1dGhlbnRpY2F0aW9uIGZyb20gJy4uL21pZGRsZXdhcmUvQXV0aGVudGljYXRpb24nO1xuaW1wb3J0IFNlYXJjaENvbnRyb2xsZXIgZnJvbSAnLi4vY29udHJvbGxlcnMvU2VhcmNoQ29udHJvbGxlcic7XG5pbXBvcnQgSGFzaFRhZ01vZGVsIGZyb20gJy4uL21vZGVscy9IYXNoVGFnTW9kZWwnO1xuXG5jbGFzcyBTZWFyY2hSb3V0ZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucm91dGVyID0gZXhwcmVzcy5Sb3V0ZXIoKTtcbiAgICB0aGlzLlNlYXJjaENvbnRyb2xsZXIgPSBuZXcgU2VhcmNoQ29udHJvbGxlcigpO1xuICB9XG5cbiAgbG9hZFJvdXRlcygpIHtcbiAgICB0aGlzLmhhc2h0YWcoKTsgLy8gYSByb3V0ZSBmb3Igc2VhcmNoaW5nIGZvciBoYXNodGFnc1xuICAgIHRoaXMudXNlcigpOyAvLyBhIHJvdXRlIGZvciBzZWFyY2hpbmcgdXNlclxuICAgIHRoaXMuYWxsKCk7IC8vIHNlYXJjaCBmb3IgYm90aCBoYXNodGFncyBhbmQgdXNlcnNcbiAgICB0aGlzLnN1Z2dlc3QoKTsgLy8gc3VnZ2VzdCByZXN1bHRcbiAgICByZXR1cm4gdGhpcy5yb3V0ZXI7XG4gIH1cblxuICBhbGwoKSB7XG4gICAgdGhpcy5yb3V0ZXIuZ2V0KCcvOnRlcm0nLCBBdXRoZW50aWNhdGlvbi5hdXRoZW50aWNhdGUsIChyZXEsIHJlcykgPT4ge1xuICAgICAgdGhpcy5TZWFyY2hDb250cm9sbGVyLmFsbChyZXEsIHJlcylcbiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4ge1xuICAgICAgICByZXMuc3RhdHVzKHJlc3BvbnNlLnN0YXR1cykuanNvbihyZXNwb25zZSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICByZXMuc3RhdHVzKGVycm9yLnN0YXR1cykuanNvbihlcnJvcik7XG4gICAgICB9KTtcbiAgICB9KTsgICAgXG4gIH1cblxuICBzdWdnZXN0KCkge1xuICAgIHRoaXMucm91dGVyLmdldCgnL3N1Z2dlc3QvOnRlcm0nLCBBdXRoZW50aWNhdGlvbi5hdXRoZW50aWNhdGUsIChyZXEsIHJlcykgPT4ge1xuICAgICAgdGhpcy5TZWFyY2hDb250cm9sbGVyLnN1Z2dlc3QocmVxKVxuICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIHJlcy5zdGF0dXMocmVzcG9uc2Uuc3RhdHVzKS5qc29uKHJlc3BvbnNlKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIHJlcy5zdGF0dXMoZXJyb3Iuc3RhdHVzKS5qc29uKGVycm9yKTtcbiAgICAgIH0pO1xuICAgIH0pOyAgIFxuICB9XG5cbiAgaGFzaHRhZygpIHtcbiAgICB0aGlzLnJvdXRlci5nZXQoJy9oYXNodGFnLzpoYXNodGFnJywgQXV0aGVudGljYXRpb24uYXV0aGVudGljYXRlLCBcbiAgICAgIChyZXEsIHJlcykgPT4ge1xuICAgICAgdGhpcy5TZWFyY2hDb250cm9sbGVyLmhhc2h0YWcocmVxLCByZXMpXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgcmVzLnN0YXR1cyhyZXNwb25zZS5zdGF0dXMpLmpzb24ocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgcmVzLnN0YXR1cyhlcnJvci5zdGF0dXMpLmpzb24oZXJyb3IpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICB1c2VyKCkge1xuICAgIHRoaXMucm91dGVyLmdldCgnL3VzZXIvOnVzZXInLCBBdXRoZW50aWNhdGlvbi5hdXRoZW50aWNhdGUsIChyZXEsIHJlcykgPT4ge1xuICAgICAgdGhpcy5TZWFyY2hDb250cm9sbGVyLnVzZXIocmVxLCByZXMpXG4gICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgcmVzLnN0YXR1cyhyZXNwb25zZS5zdGF0dXMpLmpzb24ocmVzcG9uc2UpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgcmVzLnN0YXR1cyhlcnJvci5zdGF0dXMpLmpzb24oZXJyb3IpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxufVxuXG5leHBvcnQgZGVmYXVsdCBTZWFyY2hSb3V0ZTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBhcHAvcm91dGVzL1NlYXJjaFJvdXRlLmpzIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7OztBQUFBO0FBQ0E7Ozs7Ozs7QUFDQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFFQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O0FBSUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///28\n");

/***/ }),
/* 29 */
/*!*********************************************!*\
  !*** ./app/controllers/SearchController.js ***!
  \*********************************************/
/*! no static exports found */
/*! all exports used */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _UsersModel = __webpack_require__(/*! ../models/UsersModel */ 5);\n\nvar _UsersModel2 = _interopRequireDefault(_UsersModel);\n\nvar _PostsModel = __webpack_require__(/*! ../models/PostsModel */ 12);\n\nvar _PostsModel2 = _interopRequireDefault(_PostsModel);\n\nvar _HashTagModel = __webpack_require__(/*! ../models/HashTagModel */ 7);\n\nvar _HashTagModel2 = _interopRequireDefault(_HashTagModel);\n\nvar _Validation = __webpack_require__(/*! ../helpers/Validation */ 6);\n\nvar _Validation2 = _interopRequireDefault(_Validation);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar SearchController = function () {\n  function SearchController() {\n    _classCallCheck(this, SearchController);\n\n    this.UsersModel = new _UsersModel2.default();\n    this.PostsModel = new _PostsModel2.default();\n    this.HashTagModel = new _HashTagModel2.default();\n  }\n\n  _createClass(SearchController, [{\n    key: 'suggest',\n    value: function suggest(req) {\n      var _this = this;\n\n      return new Promise(function (fulfill, reject) {\n        var searchTerm = req.params.term;\n\n        if (_Validation2.default.isAllowedString(searchTerm)) {\n\n          _this.UsersModel.search(req, {\n            username: searchTerm,\n            fullname: searchTerm\n          }).then(function (usersResult) {\n            _this.HashTagModel.searchSuggest(searchTerm).then(function (hashtagsResult) {\n              fulfill({\n                status: 200,\n                users: usersResult.data,\n                hashtags: hashtagsResult.data\n              });\n            }).catch(function () {\n              fulfill({\n                status: 200,\n                users: usersResult.data,\n                hashtags: []\n              });\n            });\n          }).catch(function (error) {\n            if (error.status === 404) {\n              _this.HashTagModel.searchSuggest(searchTerm).then(function (hashtagsResult) {\n                fulfill({\n                  status: 200,\n                  users: [],\n                  hashtags: hashtagsResult.data\n                });\n              }).catch(function (error) {\n                reject(error);\n              });\n            } else {\n              reject(error);\n            }\n          });\n        }\n      });\n    }\n  }, {\n    key: 'all',\n    value: function all(req, res) {\n      var _this2 = this;\n\n      return new Promise(function (fulfill, reject) {\n        var searchTerm = req.params.term;\n        if (_Validation2.default.isAllowedString(searchTerm)) {\n          _this2.UsersModel.search(req, {\n            username: searchTerm,\n            fullname: searchTerm\n          }).then(function (usersResult) {\n            _this2.PostsModel.search(req, searchTerm).then(function (hashtagsResult) {\n              fulfill({\n                status: 200,\n                message: 'Showing result for search term',\n                data: {\n                  users: usersResult.data,\n                  hashtags: hashtagsResult.data\n                }\n              });\n            }).catch(function (error) {\n              if (error.status === 404) {\n                fulfill({\n                  status: 200,\n                  message: 'Showing result for search term',\n                  data: {\n                    users: usersResult.data,\n                    hashtags: []\n                  }\n                });\n              } else {\n                reject(error);\n              }\n            });\n          }).catch(function (error) {\n            if (error.status === 404) {\n              _this2.PostsModel.search(req, searchTerm).then(function (hashtagsResult) {\n                fulfill({\n                  status: 200,\n                  message: 'Showing result for search term',\n                  data: {\n                    users: [],\n                    hashtags: hashtagsResult.data\n                  }\n                });\n              }).catch(function (error) {\n                reject(error);\n              });\n            } else {\n              reject(error);\n            }\n          });\n        } else {\n          reject({\n            status: 400,\n            message: 'Search term not valid'\n          });\n        }\n      });\n    }\n  }, {\n    key: 'hashtag',\n    value: function hashtag(req, res) {\n      var _this3 = this;\n\n      return new Promise(function (fulfill, reject) {\n        var hashtag = req.params.hashtag;\n        if (_Validation2.default.isAllowedString(hashtag)) {\n          _this3.PostsModel.search(req).then(function (response) {\n            fulfill(response);\n          }).catch(function (error) {\n            reject(error);\n          });\n        } else {\n          reject({\n            status: 400,\n            message: 'Search term not valid'\n          });\n        }\n      });\n    }\n  }, {\n    key: 'user',\n    value: function user(req, res) {\n      var _this4 = this;\n\n      return new Promise(function (fulfill, reject) {\n        var username = req.params.user;\n        var searchTerms = { username: username, fullname: username };\n        if (_Validation2.default.isAllowedString(username)) {\n          _this4.UsersModel.search(req, searchTerms).then(function (response) {\n            fulfill(response);\n          }).catch(function (error) {\n            reject(error);\n          });\n        } else {\n          reject({\n            status: 400,\n            message: 'Search term not valid'\n          });\n        }\n      });\n    }\n  }]);\n\n  return SearchController;\n}();\n\nexports.default = SearchController;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjkuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vYXBwL2NvbnRyb2xsZXJzL1NlYXJjaENvbnRyb2xsZXIuanM/YTIzNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgVXNlcnNNb2RlbCBmcm9tICcuLi9tb2RlbHMvVXNlcnNNb2RlbCc7XG5pbXBvcnQgUG9zdHNNb2RlbCBmcm9tICcuLi9tb2RlbHMvUG9zdHNNb2RlbCc7XG5pbXBvcnQgSGFzaFRhZ01vZGVsIGZyb20gJy4uL21vZGVscy9IYXNoVGFnTW9kZWwnO1xuaW1wb3J0IFZhbGlkYXRpb24gZnJvbSAnLi4vaGVscGVycy9WYWxpZGF0aW9uJztcblxuY2xhc3MgU2VhcmNoQ29udHJvbGxlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuVXNlcnNNb2RlbCA9IG5ldyBVc2Vyc01vZGVsKCk7XG4gICAgdGhpcy5Qb3N0c01vZGVsID0gbmV3IFBvc3RzTW9kZWwoKTtcbiAgICB0aGlzLkhhc2hUYWdNb2RlbCA9IG5ldyBIYXNoVGFnTW9kZWwoKTtcbiAgfVxuXG4gIHN1Z2dlc3QocmVxKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IHNlYXJjaFRlcm0gPSByZXEucGFyYW1zLnRlcm07XG5cbiAgICAgIGlmKFZhbGlkYXRpb24uaXNBbGxvd2VkU3RyaW5nKHNlYXJjaFRlcm0pKSB7XG5cbiAgICAgICAgdGhpcy5Vc2Vyc01vZGVsLnNlYXJjaChyZXEsIHtcbiAgICAgICAgICB1c2VybmFtZTogc2VhcmNoVGVybSxcbiAgICAgICAgICBmdWxsbmFtZTogc2VhcmNoVGVybVxuICAgICAgICB9KVxuICAgICAgICAudGhlbigodXNlcnNSZXN1bHQpID0+IHtcbiAgICAgICAgICB0aGlzLkhhc2hUYWdNb2RlbC5zZWFyY2hTdWdnZXN0KHNlYXJjaFRlcm0pXG4gICAgICAgICAgLnRoZW4oKGhhc2h0YWdzUmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBmdWxmaWxsKHtcbiAgICAgICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgICAgIHVzZXJzOiB1c2Vyc1Jlc3VsdC5kYXRhLFxuICAgICAgICAgICAgICBoYXNodGFnczogaGFzaHRhZ3NSZXN1bHQuZGF0YVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgZnVsZmlsbCh7XG4gICAgICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgICAgICB1c2VyczogdXNlcnNSZXN1bHQuZGF0YSxcbiAgICAgICAgICAgICAgaGFzaHRhZ3M6IFtdXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgaWYoZXJyb3Iuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgICAgIHRoaXMuSGFzaFRhZ01vZGVsLnNlYXJjaFN1Z2dlc3Qoc2VhcmNoVGVybSlcbiAgICAgICAgICAgIC50aGVuKChoYXNodGFnc1Jlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICBmdWxmaWxsKHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICAgICAgICB1c2VyczogW10sXG4gICAgICAgICAgICAgICAgaGFzaHRhZ3M6IGhhc2h0YWdzUmVzdWx0LmRhdGFcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgfVxuICAgICAgICB9KTsgXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBhbGwocmVxLCByZXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3Qgc2VhcmNoVGVybSA9IHJlcS5wYXJhbXMudGVybTtcbiAgICAgIGlmKFZhbGlkYXRpb24uaXNBbGxvd2VkU3RyaW5nKHNlYXJjaFRlcm0pKSB7XG4gICAgICAgIHRoaXMuVXNlcnNNb2RlbC5zZWFyY2gocmVxLCB7XG4gICAgICAgICAgdXNlcm5hbWU6IHNlYXJjaFRlcm0sXG4gICAgICAgICAgZnVsbG5hbWU6IHNlYXJjaFRlcm1cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4oKHVzZXJzUmVzdWx0KSA9PiB7XG4gICAgICAgICAgdGhpcy5Qb3N0c01vZGVsLnNlYXJjaChyZXEsIHNlYXJjaFRlcm0pXG4gICAgICAgICAgLnRoZW4oKGhhc2h0YWdzUmVzdWx0KSA9PiB7XG4gICAgICAgICAgICBmdWxmaWxsKHtcbiAgICAgICAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdTaG93aW5nIHJlc3VsdCBmb3Igc2VhcmNoIHRlcm0nLFxuICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgdXNlcnM6IHVzZXJzUmVzdWx0LmRhdGEsXG4gICAgICAgICAgICAgICAgaGFzaHRhZ3M6IGhhc2h0YWdzUmVzdWx0LmRhdGFcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBpZihlcnJvci5zdGF0dXMgPT09IDQwNCkge1xuICAgICAgICAgICAgICBmdWxmaWxsKHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IDIwMCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnU2hvd2luZyByZXN1bHQgZm9yIHNlYXJjaCB0ZXJtJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICB1c2VyczogdXNlcnNSZXN1bHQuZGF0YSxcbiAgICAgICAgICAgICAgICAgIGhhc2h0YWdzOiBbXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgaWYoZXJyb3Iuc3RhdHVzID09PSA0MDQpIHtcbiAgICAgICAgICAgIHRoaXMuUG9zdHNNb2RlbC5zZWFyY2gocmVxLCBzZWFyY2hUZXJtKVxuICAgICAgICAgICAgICAudGhlbigoaGFzaHRhZ3NSZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICBmdWxmaWxsKHtcbiAgICAgICAgICAgICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1Nob3dpbmcgcmVzdWx0IGZvciBzZWFyY2ggdGVybScsXG4gICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJzOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgaGFzaHRhZ3M6IGhhc2h0YWdzUmVzdWx0LmRhdGFcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7ICAgICAgICBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlamVjdCh7XG4gICAgICAgICAgc3RhdHVzOiA0MDAsXG4gICAgICAgICAgbWVzc2FnZTogJ1NlYXJjaCB0ZXJtIG5vdCB2YWxpZCdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBoYXNodGFnKHJlcSwgcmVzKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChmdWxmaWxsLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGhhc2h0YWcgPSByZXEucGFyYW1zLmhhc2h0YWc7XG4gICAgICBpZihWYWxpZGF0aW9uLmlzQWxsb3dlZFN0cmluZyhoYXNodGFnKSkge1xuICAgICAgICB0aGlzLlBvc3RzTW9kZWwuc2VhcmNoKHJlcSlcbiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgZnVsZmlsbChyZXNwb25zZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9KTsgICAgICAgIFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgICBtZXNzYWdlOiAnU2VhcmNoIHRlcm0gbm90IHZhbGlkJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHVzZXIocmVxLCByZXMpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKGZ1bGZpbGwsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgdXNlcm5hbWUgPSByZXEucGFyYW1zLnVzZXI7XG4gICAgICBjb25zdCBzZWFyY2hUZXJtcyA9IHsgdXNlcm5hbWUsIGZ1bGxuYW1lOiB1c2VybmFtZSB9O1xuICAgICAgaWYoVmFsaWRhdGlvbi5pc0FsbG93ZWRTdHJpbmcodXNlcm5hbWUpKSB7XG4gICAgICAgIHRoaXMuVXNlcnNNb2RlbC5zZWFyY2gocmVxLCBzZWFyY2hUZXJtcylcbiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgZnVsZmlsbChyZXNwb25zZSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICByZWplY3QoZXJyb3IpXG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVqZWN0KHtcbiAgICAgICAgICBzdGF0dXM6IDQwMCxcbiAgICAgICAgICBtZXNzYWdlOiAnU2VhcmNoIHRlcm0gbm90IHZhbGlkJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IFNlYXJjaENvbnRyb2xsZXI7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gYXBwL2NvbnRyb2xsZXJzL1NlYXJjaENvbnRyb2xsZXIuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7O0FBQUE7QUFDQTs7Ozs7OztBQUNBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFDQTtBQUVBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBS0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUhBO0FBUUE7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSEE7QUFRQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSEE7QUFRQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFJQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBOzs7Ozs7QUFJQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///29\n");

/***/ })
/******/ ])));